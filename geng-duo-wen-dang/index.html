<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>更多文档 - fur2-inky指南</title><meta name="description" content="高阶 Inky 残卷 INK 最初被设计为游戏引擎的脚本插件，因此具有丰富而强大的功能。我将官方文档中，部分我有兴趣，且对你使用 Inky 可能有帮助的内容翻译至此。如你发现“好像少了些什么”，或想进一步了解，请阅读官方文档。 随着故事变长，在没有其他结构的情况下，它们会越来越乱，难以井井有条。 结点可以包括称为“针脚”（stitches）的子结点，这些使用单个等号（=）标记。 === the_orient_express === //东方快车 结点= in_first_class //头等厢 针脚 ...= in_third_class //三等厢 针脚 ...= in_the_guards_van //警务车厢 针脚&hellip;"><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://fur2.now.sh/geng-duo-wen-dang/"><link rel="alternate" type="application/atom+xml" href="https://fur2.now.sh/feed.xml"><link rel="alternate" type="application/json" href="https://fur2.now.sh/feed.json"><meta property="og:title" content="更多文档"><meta property="og:site_name" content="fur2-inky指南"><meta property="og:description" content="高阶 Inky 残卷 INK 最初被设计为游戏引擎的脚本插件，因此具有丰富而强大的功能。我将官方文档中，部分我有兴趣，且对你使用 Inky 可能有帮助的内容翻译至此。如你发现“好像少了些什么”，或想进一步了解，请阅读官方文档。 随着故事变长，在没有其他结构的情况下，它们会越来越乱，难以井井有条。 结点可以包括称为“针脚”（stitches）的子结点，这些使用单个等号（=）标记。 === the_orient_express === //东方快车 结点= in_first_class //头等厢 针脚 ...= in_third_class //三等厢 针脚 ...= in_the_guards_van //警务车厢 针脚&hellip;"><meta property="og:url" content="https://fur2.now.sh/geng-duo-wen-dang/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://fur2.now.sh/media/website/favicon.png" type="image/png"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style><link rel="stylesheet" href="https://fur2.now.sh/assets/css/style.css?v=f692e2b259fbfa564402a28d74e17bd0"><link rel="stylesheet" href="https://fur2.now.sh/assets/css/prism-dark.css?v=32fe89d38074580b38eb9873f448af80"><link rel="stylesheet" href="https://fur2.now.sh/assets/css/docsearch.css?v=b3db77fb5744375a94f66dbb17d67579"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fur2.now.sh/geng-duo-wen-dang/"},"headline":"更多文档","datePublished":"2020-01-18T17:14","dateModified":"2020-01-18T17:14","description":"高阶 Inky 残卷 INK 最初被设计为游戏引擎的脚本插件，因此具有丰富而强大的功能。我将官方文档中，部分我有兴趣，且对你使用 Inky 可能有帮助的内容翻译至此。如你发现“好像少了些什么”，或想进一步了解，请阅读官方文档。 随着故事变长，在没有其他结构的情况下，它们会越来越乱，难以井井有条。 结点可以包括称为“针脚”（stitches）的子结点，这些使用单个等号（=）标记。 === the_orient_express === //东方快车 结点= in_first_class //头等厢 针脚 ...= in_third_class //三等厢 针脚 ...= in_the_guards_van //警务车厢 针脚&hellip;","author":{"@type":"Person","name":"Legacy"},"publisher":{"@type":"Organization","name":"Legacy"}}</script><script async src="https://fur2.now.sh/assets/js/lazysizes.min.js?v=c7552affa0e5c6badad03286730a82bb"></script></head><body><script>((window.gitter = {}).chat = {}).options = {
    room: 'fur2/community'
  };</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer="defer"></script><header class="top"><div class="top__logo"><a class="logo" href="https://fur2.now.sh/">fur2-inky指南</a></div><div class="top__search search"><svg class="search__icon" role="presentation" height="17" width="17"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#search"/></svg><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://fur2.now.sh/search.html" class="search__form" role="search"><input type="search" placeholder="Search documentation ..." aria-label="Search" id="docsearch-input" class="search__input js-search-input"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__button js-search-btn" aria-label="Search"><span>Search</span> <svg role="presentation" focusable="false" height="17" width="17"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#search"/></svg></button></div><div class="top__links"><a href="https://github.com/fur2/story" class="top__links-url" aria-label="Github" title="Github" target="_blank" rel="noopener"><svg height="24" width="24"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#github"></use></svg></a></div><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button></header><main class="main"><div class="main__left"><div class="main__left-inner"><div class="main__left-content"><article class="post"><header><h1 class="post__title">更多文档</h1></header><div class="post__entry"><div class="header___O32EY"><div class="title___3ntsK"><h1 id="article-title" class="articleTitle___3zWrP">高阶 Inky 残卷</h1></div></div><div class="content___2v1LS"><div class="yuque-doc-content" data-df="lake"><div class="lake-engine-view" tabindex="0"><p> </p><blockquote><p>INK 最初被设计为游戏引擎的脚本插件，因此具有丰富而强大的功能。我将官方文档中，部分我有兴趣，且对你使用 Inky 可能有帮助的内容翻译至此。如你发现“好像少了些什么”，或想进一步了解，请阅读<a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md" target="_blank" rel="noopener noreferrer">官方文档</a>。</p></blockquote><p> </p><h1 id="TLpja">1. 基础</h1><h2 id="cDQJr">1.1 <a href="https://www.yuque.com/apsno9/pcke0w/gix3ga" target="_blank" rel="noopener noreferrer">Inky 基础教程</a></h2><h2 id="G4kWa">1.2 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#6-includes-and-stitches" target="_blank" rel="noopener noreferrer">针脚 stitches</a></h2><h3 id="QzCB7">结点可有子节点</h3><p>随着故事变长，在没有其他结构的情况下，它们会越来越乱，难以井井有条。</p><p>结点可以包括称为“针脚”（stitches）的子结点，这些使用<strong>单个等号</strong>（<code>=</code>）标记。</p><p> </p><div id="subQJ" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20the_orient_express%20%3D%3D%3D%20%2F%2F%E4%B8%9C%E6%96%B9%E5%BF%AB%E8%BD%A6%20%E7%BB%93%E7%82%B9%5Cn%3D%20in_first_class%20%2F%2F%E5%A4%B4%E7%AD%89%E5%8E%A2%20%E9%92%88%E8%84%9A%5Cn%5Ct...%5Cn%3D%20in_third_class%20%2F%2F%E4%B8%89%E7%AD%89%E5%8E%A2%20%E9%92%88%E8%84%9A%5Cn%5Ct...%5Cn%3D%20in_the_guards_van%20%2F%2F%E8%AD%A6%E5%8A%A1%E8%BD%A6%E5%8E%A2%20%E9%92%88%E8%84%9A%5Cn%5Ct...%5Cn%3D%20missed_the_train%20%2F%2F%E9%94%99%E8%BF%87%E7%81%AB%E8%BD%A6%20%E9%92%88%E8%84%9A%5Cn%5Ct...%22%2C%22id%22%3A%22subQJ%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== the_orient_express === //东方快车 结点
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= in_first_class //头等厢 针脚
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ...
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= in_third_class //三等厢 针脚
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ...
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= in_the_guards_van //警务车厢 针脚
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ...
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= missed_the_train //错过火车 针脚
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ...</span></span></pre></div></div></div><p> </p><p>例如，可以使用一个结点来写拍摄场景，用结点里的多个针脚来写场景中的事件。</p><p> </p><h3 id="8wPDj">针脚有唯一的名称</h3><p>针脚可被用于跳转的地址。</p><p> </p><div id="Vov3J" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%5Ct%5B%E5%89%8D%E5%BE%80%E4%B8%89%E7%AD%89%E5%8E%A2%5D%5Cn%5Ct-%3E%20the_orient_express.in_third_class%20%2F%2F%E8%B7%B3%E8%BD%AC%E5%88%B0%20%E4%B8%9C%E6%96%B9%E5%BF%AB%E8%BD%A6%E7%BB%93%E7%82%B9%20%E4%B8%8B%E7%9A%84%20%E4%B8%89%E7%AD%89%E8%88%B1%E9%92%88%E8%84%9A%5Cn%5Cn*%5Ct%5B%E5%89%8D%E5%BE%80%E8%AD%A6%E5%8A%A1%E8%BD%A6%E5%8E%A2%5D%5Cn%5Ct-%3E%20the_orient_express.in_the_guards_van%20%2F%2F%E8%B7%B3%E8%BD%AC%E5%88%B0%20%E4%B8%9C%E6%96%B9%E5%BF%AB%E8%BD%A6%E7%BB%93%E7%82%B9%20%E4%B8%8B%E7%9A%84%20%E8%AD%A6%E5%8A%A1%E8%BD%A6%E5%8E%A2%E9%92%88%E8%84%9A%22%2C%22id%22%3A%22Vov3J%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [前往三等厢]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; the_orient_express.in_third_class //跳转到 东方快车结点 下的 三等舱针脚
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [前往警务车厢]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; the_orient_express.in_the_guards_van //跳转到 东方快车结点 下的 警务车厢针脚</span></span></pre></div></div></div><p> </p><h3 id="ej2FD">第一个是默认针脚</h3><p>如果结点包含针脚，默认跳转到第一个针脚。</p><p> </p><div id="Ojl9M" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%5Ct%5B%E5%89%8D%E5%BE%80%E5%A4%B4%E7%AD%89%E5%8E%A2%5D%5Cn%5Ct%E2%80%9C%E5%A4%B4%E7%AD%89%E5%8E%A2%2C%20%E5%85%88%E7%94%9F%E3%80%82%20%E8%BF%98%E6%9C%89%E5%85%B6%E4%BB%96%E5%9C%B0%E6%96%B9%E5%90%97%EF%BC%9F%E2%80%9D%5Cn%5Ct-%3E%20the_orient_express%22%2C%22id%22%3A%22Ojl9M%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [前往头等厢]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “头等厢, 先生。 还有其他地方吗？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; the_orient_express</span></span></pre></div></div></div><p> </p><p>等同于（...除非我们改变结点内针脚的顺序！）：</p><p> </p><div id="GUD6w" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%5Ct%5B%E5%89%8D%E5%BE%80%E5%A4%B4%E7%AD%89%E5%8E%A2%5D%5Cn%5Ct%E2%80%9C%E5%A4%B4%E7%AD%89%E5%8E%A2%2C%20%E5%85%88%E7%94%9F%E3%80%82%20%E8%BF%98%E6%9C%89%E5%85%B6%E4%BB%96%E5%9C%B0%E6%96%B9%E5%90%97%EF%BC%9F%E2%80%9D%5Cn%5Ct-%3E%20the_orient_express.in_first_class%20%22%2C%22id%22%3A%22GUD6w%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [前往头等厢]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “头等厢, 先生。 还有其他地方吗？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; the_orient_express.in_first_class </span></span></pre></div></div></div><p> </p><p>你还可以在针脚外的顶部加入任何内容，但注意此时不会自动运行第一个针脚。</p><p> </p><div id="ZuAaq" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20the_orient_express%20%3D%3D%3D%20%5Cn%5Cn%E6%88%91%E4%BB%AC%E4%B8%8A%E8%BD%A6%E4%BA%86%EF%BC%8C%E4%BD%86%E6%98%AF%E5%8E%BB%E5%93%AA%EF%BC%9F%5Cn*%5Ct%5B%E5%A4%B4%E7%AD%89%E5%8E%A2%5D%20-%3E%20in_first_class%5Cn*%5Ct%5B%E4%BA%8C%E7%AD%89%E5%8E%A2%5D%20-%3E%20in_second_class%5Cn%5Cn%3D%20in_first_class%20%2F%2F%E4%B8%8D%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%BF%90%E8%A1%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%92%88%E8%84%9A%5Cn%5Ct...%5Cn%3D%20in_second_class%5Cn%5Ct...%22%2C%22id%22%3A%22ZuAaq%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== the_orient_express === 
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">我们上车了，但是去哪？
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [头等厢] -&gt; in_first_class
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [二等厢] -&gt; in_second_class
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">= in_first_class //不会自动运行第一个针脚
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ...
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= in_second_class
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ...</span></span></pre></div></div></div><p> </p><h3 id="ENqoW">本地跳转</h3><p>在结点内部，你无需完整的针脚地址。</p><p> </p><div id="SB9nS" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%3E%20the_orient_express%5Cn%3D%3D%3D%20the_orient_express%20%3D%3D%3D%5Cn%3D%20in_first_class%20%5Cn%5Ct%E6%88%91%E5%AE%89%E9%A1%BF%E5%A5%BD%E6%88%91%E7%9A%84%E4%B8%BB%E4%BA%BA%E3%80%82%5Cn%5Ct*%5Ct%5B%E5%89%8D%E5%BE%80%E4%B8%89%E7%AD%89%E5%8E%A2%5D%5Cn%5Ct%5Ct-%3E%20in_third_class%5Cn%3D%20in_third_class%5Cn%5Ct%E6%88%91%E5%9D%90%E4%B8%8B%E6%9D%A5%E4%BA%86%E3%80%82%22%2C%22id%22%3A%22SB9nS%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt; the_orient_express
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== the_orient_express ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= in_first_class 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    我安顿好我的主人。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   [前往三等厢]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; in_third_class
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= in_third_class
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    我坐下来了。</span></span></pre></div></div></div><p> </p><p>这意味着针脚和结点的名称不能相同，但是不同的结点里可以有相同名称的针脚。（你不能把某个车厢也叫东方快车，但东方快车和蒙古专列里都可以有头等舱。）如果使用了不明确的名称，编译器发出警告。</p><p> </p><h3 id="KrN2u"><a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#script-files-can-be-combined" target="_blank" rel="noopener noreferrer">脚本文件可以合并</a></h3><p> </p><h2 id="AfsXv">1.3 选项 choices</h2><h3 id="w2ZSK"><a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#fallback-choices" target="_blank" rel="noopener noreferrer">后备选项 fallback choices</a></h3><p>如果某个地方都是一次性选项，那么多次经历后，可能会出现“内容用光（ran out of content）”的错误。</p><p>我们可通过“后备选择”解决问题。后备选项不会直接显示给玩家，但如果没有其他选项可选是，则游戏会自动选择。</p><p>后备选项只是“没有选项时的选择”：<code>*	-&gt; out_of_options</code></p><p>并且，在轻微滥用语法下，我们可以使其中的内容做出默认选择：</p><p> </p><div id="YPDtl" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%20%5Ct-%3E%20%5Cn%5Ct%E7%A9%86%E5%BE%B7%E6%97%A0%E6%B3%95%E8%A7%A3%E9%87%8A%E4%BB%96%E6%98%AF%E6%80%8E%E4%B9%88%E4%BB%8E%E9%82%A3%E8%BE%86%E7%87%83%E7%83%A7%E7%9D%80%E7%9A%84%E8%B4%A7%E8%BD%A6%E9%87%8C%E5%87%BA%E6%9D%A5%E7%9A%84%E3%80%82%20-%3E%20season_2%22%2C%22id%22%3A%22YPDtl%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   -&gt; 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    穆德无法解释他是怎么从那辆燃烧着的货车里出来的。 -&gt; season_2</span></span></pre></div></div></div><p> </p><p>举个例子：</p><p> </p><div id="kHdIR" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20find_help%20%3D%3D%3D%5Cn%5Ct%E4%BD%A0%E5%9C%A8%E4%BA%BA%E7%BE%A4%E4%B8%AD%E6%8B%BC%E5%91%BD%E5%9C%B0%E5%AF%BB%E6%89%BE%E4%B8%80%E5%BC%A0%E5%8F%8B%E5%A5%BD%E7%9A%84%E8%84%B8%E3%80%82%20%5Cn%5Ct*%5Ct%E6%88%B4%E5%B8%BD%E5%AD%90%E7%9A%84%E5%A5%B3%E4%BA%BA%5B%EF%BC%9F%5D%20%E7%B2%97%E6%9A%B4%E5%9C%B0%E6%8A%8A%E4%BD%A0%E6%8E%A8%E5%88%B0%E4%B8%80%E8%BE%B9%E3%80%82%20-%3E%20find_help%5Cn%5Ct*%5Ct%E6%8B%BF%E5%85%AC%E6%96%87%E5%8C%85%E7%9A%84%E7%94%B7%E4%BA%BA%5B%EF%BC%9F%5D%20%E5%BE%88%E5%8E%8C%E6%81%B6%E7%9A%84%E4%BB%8E%E6%97%81%E8%BE%B9%E5%8C%86%E5%8C%86%E8%80%8C%E8%BF%87%E3%80%82%20-%3E%20find_help%20%5Cn%20%20%5Cn%5Ct*%5Ct-%3E%20%20%2F%2F%E5%90%8E%E5%A4%87%E9%80%89%E9%A1%B9%5Cn%5Ct%5Ct%E4%BD%86%E4%B8%BA%E6%97%B6%E5%B7%B2%E6%99%9A%EF%BC%9A%E4%BD%A0%E5%80%92%E5%9C%A8%E7%AB%99%E5%8F%B0%E4%B8%8A%E3%80%82%E4%B8%80%E5%88%87%E9%83%BD%E7%BB%93%E6%9D%9F%E4%BA%86%E3%80%82%5Cn%5Ct%5Ct-%3E%20END%22%2C%22id%22%3A%22kHdIR%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== find_help ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你在人群中拼命地寻找一张友好的脸。 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   戴帽子的女人[？] 粗暴地把你推到一边。 -&gt; find_help
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   拿公文包的男人[？] 很厌恶的从旁边匆匆而过。 -&gt; find_help 
</span></span>  
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   -&gt;  //后备选项
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        但为时已晚：你倒在站台上。一切都结束了。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; END</span></span></pre></div></div></div><p> </p><figure class="image lake-drag-image"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fgif%2F262531%2F1574067425919-b245ce8c-d8c7-42f7-89cf-ab0c7c67ff9e.gif%22%2C%22originWidth%22%3A1592%2C%22originHeight%22%3A412%2C%22name%22%3A%221.gif%22%2C%22size%22%3A356268%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A1592%2C%22height%22%3A412%7D"><img title="1.gif" src="https://cdn.nlark.com/yuque/0/2019/gif/262531/1574067425919-b245ce8c-d8c7-42f7-89cf-ab0c7c67ff9e.gif" data-is-external-image="true" alt="1.gif" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/gif/262531/1574067425919-b245ce8c-d8c7-42f7-89cf-ab0c7c67ff9e.gif"></span></figure><p></p><p> </p><h2 id="RSKMD">1.4 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#6-variable-text" target="_blank" rel="noopener noreferrer">可变文本</a> variable text</h2><h3 id="eqPku">序列</h3><p>序列（默认）每次都会显示下一个元素。当“没有下一个”时，它将继续显示最后一个元素。</p><p> </p><div id="yTUMl" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22id%22%3A%22yTUMl%22%2C%22code%22%3A%22%E7%94%B5%E5%8F%B0%E5%98%B6%E5%98%B6%E4%BD%9C%E5%93%8D%E3%80%82%20%7B%E2%80%9C%E4%B8%89%EF%BC%81%E2%80%9D%7C%E2%80%9C%E4%BA%8C%EF%BC%81%E2%80%9D%7C%E2%80%9C%E4%B8%80%EF%BC%81%E2%80%9D%7C%E4%BC%A0%E6%9D%A5%E4%BA%86%E7%88%86%E7%82%B8%E7%9A%84%E5%93%8D%E5%A3%B0%E3%80%82%7C%E8%BF%99%E5%8F%AA%E6%9C%89%E4%BA%9B%E5%99%AA%E5%A3%B0%7D%5Cn%5Cn%7B%E6%88%91%E7%94%A8%E4%BA%94%E7%A3%85%E9%92%9E%E7%A5%A8%E7%BB%99%E6%88%91%E4%B9%B0%E4%BA%86%E6%9D%AF%E5%92%96%E5%95%A1%E3%80%82%7C%E6%88%91%E4%B9%B0%E4%BA%86%E7%AC%AC%E4%BA%8C%E6%9D%AF%E5%92%96%E5%95%A1%E7%BB%99%E6%9C%8B%E5%8F%8B%E3%80%82%7C%E6%88%91%E6%B2%A1%E9%92%B1%E4%B9%B0%E5%92%96%E5%95%A1%E4%BA%86%E3%80%82%7D%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">电台嘶嘶作响。 {“三！”|“二！”|“一！”|传来了爆炸的响声。|这只有些噪声}
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">{我用五磅钞票给我买了杯咖啡。|我买了第二杯咖啡给朋友。|我没钱买咖啡了。}</span></span></pre></div></div></div><p> </p><h3 id="SpnVS">周期，一次性，随机</h3><p>循环（标记 <code>&amp;</code>）就像序列，但它循环内容。</p><p> </p><div id="uhfgv" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BB%8A%E5%A4%A9%E6%98%AF%20%7B%26%E5%91%A8%E4%B8%80%7C%E5%91%A8%E4%BA%8C%7C%E5%91%A8%E4%B8%89%7C%E5%91%A8%E5%9B%9B%7C%E5%91%A8%E4%BA%94%7C%E5%91%A8%E5%85%AD%7C%E5%91%A8%E6%97%A5%7D%E3%80%82%22%2C%22id%22%3A%22uhfgv%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">今天是 {&amp;周一|周二|周三|周四|周五|周六|周日}。</span></span></pre></div></div></div><p> </p><p>一次性（标记 <code>!</code>）也像序列，但当“没有下一个时”，它将不显示。</p><p> </p><div id="NliTD" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BB%96%E7%BB%99%E6%88%91%E8%AE%B2%E4%BA%86%E4%B8%AA%E7%AC%91%E8%AF%9D%E3%80%82%5Cn%7B!%E6%88%91%E6%9C%89%E7%A4%BC%E8%B2%8C%E7%9A%84%E7%AC%91%E4%BA%86%E3%80%82%7C%E6%88%91%E5%BE%AE%E7%AC%91%E4%BA%86%E3%80%82%7C%E6%88%91%E5%81%9A%E4%BA%86%E4%B8%8B%E9%AC%BC%E8%84%B8%E3%80%82%7C%E6%88%91%E4%B8%8D%E6%83%B3%E5%86%8D%E5%81%9A%E5%87%BA%E5%8F%8D%E5%BA%94%E4%BA%86%E3%80%82%7D%22%2C%22id%22%3A%22NliTD%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">他给我讲了个笑话。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{!我有礼貌的笑了。|我微笑了。|我做了下鬼脸。|我不想再做出反应了。}</span></span></pre></div></div></div><p> </p><p>随机（标记 <code>~</code>）随机显示内容。</p><p> </p><div id="MuqTC" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%88%91%E6%8E%B7%E4%BA%86%E6%9E%9A%E7%A1%AC%E5%B8%81%E3%80%82%20%7B~%E5%AD%97%E9%9D%A2%7C%E8%8A%B1%E9%9D%A2%7D%E3%80%82%22%2C%22id%22%3A%22MuqTC%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">我掷了枚硬币。 {~字面|花面}。</span></span></pre></div></div></div><p> </p><h3 id="suQW6">更多技巧</h3><p>可以包含空元素。</p><div id="B9FAX" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%88%91%E5%90%91%E5%89%8D%E8%BF%88%E4%BA%86%E4%B8%80%E6%AD%A5%20%7B!%7C%7C%7C%7C%E7%84%B6%E5%90%8E%E7%81%AF%E7%81%AB%E7%86%84%E7%81%AD%E4%BA%86%E3%80%82%20-%3E%20eek%7D%22%2C%22id%22%3A%22B9FAX%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">我向前迈了一步 {!||||然后灯火熄灭了。 -&gt; eek}</span></span></pre></div></div></div><p> </p><p>可以进行嵌套。</p><p> </p><div id="9SaGB" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E8%BF%99%E4%B8%AA%E6%80%AA%E5%85%BD%7B%26%7B%E6%B2%A1%E6%B5%AA%E8%B4%B9%E6%97%B6%E9%97%B4%7C%7D%E6%89%93%7C%E7%88%AA%7D%7B%26%E4%BD%A0%7C%E8%BF%9B%E4%BD%A0%7B%26%E7%9A%84%E8%85%BF%7C%E7%9A%84%E8%83%B3%E8%86%8A%7C%E7%9A%84%E8%83%B8%7D%7D%E3%80%82%22%2C%22id%22%3A%229SaGB%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">这个怪兽{&amp;{没浪费时间|}打|爪}{&amp;你|进你{&amp;的腿|的胳膊|的胸}}。</span></span></pre></div></div></div><p> </p><p>可插入跳转。</p><p> </p><div id="EcXOO" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%88%91%7B%E5%9C%A8%E7%AD%89%E3%80%82%7C%E7%AD%89%E4%BA%86%E4%B8%80%E4%BC%9A%7C%E6%89%93%E7%9B%B9%E4%BA%86%E3%80%82%7C%E9%86%92%E6%9D%A5%E5%8F%88%E7%AD%89%E4%BA%86%E4%BC%9A%E3%80%82%7C%E6%94%BE%E5%BC%83%E5%B9%B6%E7%A6%BB%E5%BC%80%E4%BA%86%20-%3E%20leave_post_office%7D%22%2C%22id%22%3A%22EcXOO%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">我{在等。|等了一会|打盹了。|醒来又等了会。|放弃并离开了 -&gt; leave_post_office}</span></span></pre></div></div></div><p> </p><p>也可在选项中使用。（注意，<code>{</code>不能出现在选项开头，会与条件选项混淆；<code>/</code> 出现在里面可能出现错误。）</p><p> </p><div id="gVEEX" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%2B%20%5Ct%E2%80%9C%E6%82%A8%E5%A5%BD%2C%20%7B%26%E4%B8%BB%E4%BA%BA%7CFogg%E5%85%88%E7%94%9F%7C%E4%BD%A0%7C%E6%A3%95%E7%9C%BC%7D!%E2%80%9D%5B%5D%20%E6%88%91%E5%96%8A%E9%81%93%E3%80%82%22%2C%22id%22%3A%22gVEEX%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">+   “您好, {&amp;主人|Fogg先生|你|棕眼}!”[] 我喊道。</span></span></pre></div></div></div><p> </p><p>可变文字可以在循环内使用，让游戏看起来很智能，而无需特别的工作。</p><p>这里是一个单结点版的"打地鼠"，<a href="https://inky-mole.netlify.com/" target="_blank" rel="noopener noreferrer">体验故事运行</a>。我们使用一次性和后备选项，阻止“地鼠逃走”，游戏始终会结束。</p><p> </p><div id="cqhMx" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%3Ewhack_a_mole%5Cn%5Cn%3D%3D%3D%20whack_a_mole%20%3D%3D%3D%5Cn%5Ct%7B%E6%88%91%E4%B8%BE%E8%B5%B7%E4%BA%86%E9%94%A4%E5%AD%90%E3%80%82%7C%7B~%E6%B2%A1%E6%89%93%E4%B8%AD%EF%BC%81%7C%E6%B2%A1%E6%9C%89%EF%BC%81%7C%E4%B8%8D%E5%A5%BD%EF%BC%8C%E5%AE%83%E5%9C%A8%E5%93%AA%EF%BC%9F%7C%20%E5%81%8F%E4%BA%86%EF%BC%81%7C%20%E8%A7%81%E9%AC%BC%E2%80%A6%7C%20%E5%95%8A%EF%BC%8C%E6%89%8B%E6%BB%91%E4%BA%86%EF%BC%81%7C%20%E5%97%B7%E5%91%9C%EF%BC%81%7C%E5%95%8A%E5%93%88%EF%BC%8C%E6%8A%93%E4%BD%8F%E4%BA%86%EF%BC%81-%3E%20over%20%7D%7D%5Cn%5Ct%E8%BF%99%E4%B8%AA%7B%26%E5%9C%B0%E9%BC%A0%7C%7B%26%E4%B8%8D%E5%8F%8B%E5%A5%BD%E7%9A%84%7C%E5%8F%AF%E6%81%B6%E7%9A%84%7C%E4%BD%8E%E7%BA%A7%E7%9A%84%7D%7B%26%E7%94%9F%E7%89%A9%7C%E5%95%AE%E9%BD%BF%E5%8A%A8%E7%89%A9%7D%7D%7B%E5%9C%A8%E6%9F%90%E5%A4%84%7C%E8%97%8F%E5%9C%A8%E6%9F%90%E5%A4%84%7C%E4%BB%8D%E7%84%B6%E9%80%8D%E9%81%A5%E6%B3%95%E5%A4%96%7C%E5%98%B2%E7%AC%91%E6%88%91%7C%E4%BE%9D%E6%97%A7%E6%B2%A1%E6%89%93%E4%B8%AD%7C%E6%B3%A8%E5%AE%9A%E4%BC%9A%E5%A4%B1%E8%B4%A5%7D%E3%80%82%20%3C%3E%5Cn%5Ct%7B!%E6%88%91%E4%BC%9A%E6%8A%93%E4%BD%8F%E5%AE%83%EF%BC%81%7C%E4%BD%86%E8%BF%99%E6%AC%A1%E5%AE%83%E9%80%83%E4%B8%8D%E6%8E%89%E4%BA%86%E3%80%82%7D%5Cn%5Ct*%20%5Ct%5B%7B~%E6%89%93%7C%E7%A0%B8%7C%E5%B0%9D%E8%AF%95%7D%E5%B7%A6%E4%B8%8A%E8%A7%92%5D%20%5Ct-%3E%20whack_a_mole%5Cn%5Ct*%20%20%5B%7B~%E5%B0%B1%E6%98%AF%7C%E6%9A%B4%E5%87%BB%7C%E7%8C%9B%E5%87%BB%7D%E5%8F%B3%E4%B8%8A%E8%A7%92%5D%20-%3E%20whack_a_mole%5Cn%5Ct*%20%20%5B%7B~%E7%A0%8D%7C%E9%94%A4%7D%E4%B8%AD%E9%97%B4%5D%20-%3E%20whack_a_mole%5Cn%5Ct*%20%20%5B%7B~%E7%97%9B%E5%87%BB%7C%E8%82%AF%E5%AE%9A%E6%98%AF%7D%E5%B7%A6%E4%B8%8B%E8%A7%92%5D%20%5Ct-%3E%20whack_a_mole%5Cn%5Ct*%20%20%5B%7B~%E6%8E%80%E5%BC%80%7C%E9%87%8D%E5%87%BB%7D%E5%8F%B3%E4%B8%8B%E8%A7%92%5D%20%5Ct-%3E%20whack_a_mole%5Cn%5Ct*%20-%3E%20%5Cn%5Ct%E4%BD%A0%E7%B4%AF%E5%9D%8F%E4%BA%86%EF%BC%81%E5%9C%B0%E9%BC%A0%E5%87%BB%E8%B4%A5%E4%BA%86%E4%BD%A0%EF%BC%81-%3Eover%5Cn%5Ct%5Cn%3D%20over%5Cn%23%20CLASS%3A%20end%5Cn%E2%80%A6%E2%80%A6%E5%85%A8%E5%89%A7%E7%BB%88%5Cn%5Cn%2B%20%E4%BB%8E%E5%A4%B4%E5%86%8D%E6%9D%A5%EF%BC%9F%5Cn%20%20%20%20%23%20RESTART%5Cn%20%20%20%20%5Cn-%3E%20END%22%2C%22id%22%3A%22cqhMx%22%2C%22height%22%3A216.4%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt;whack_a_mole
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== whack_a_mole ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    {我举起了锤子。|{~没打中！|没有！|不好，它在哪？| 偏了！| 见鬼…| 啊，手滑了！| 嗷呜！|啊哈，抓住了！-&gt; over }}
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    这个{&amp;地鼠|{&amp;不友好的|可恶的|低级的}{&amp;生物|啮齿动物}}{在某处|藏在某处|仍然逍遥法外|嘲笑我|依旧没打中|注定会失败}。 &lt;&gt;
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    {!我会抓住它！|但这次它逃不掉了。}
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   [{~打|砸|尝试}左上角]  -&gt; whack_a_mole
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *  [{~就是|暴击|猛击}右上角] -&gt; whack_a_mole
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *  [{~砍|锤}中间] -&gt; whack_a_mole
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *  [{~痛击|肯定是}左下角]   -&gt; whack_a_mole
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *  [{~掀开|重击}右下角]    -&gt; whack_a_mole
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * -&gt; 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你累坏了！地鼠击败了你！-&gt;over
</span></span>    
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">= over
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content"># CLASS: end
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">……全剧终
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">+ 从头再来？
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    # RESTART
</span></span>    
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt; END</span></span></pre></div></div></div><p> </p><p>这里有一些生活建议。请注意选项，电视的吸引力永远不会消失：</p><p> </p><div id="95XSB" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20turn_on_television%20%3D%3D%3D%20%20%5Cn%E6%88%91%E6%89%93%E5%BC%80%E7%94%B5%E8%A7%86%7B%E4%B8%80%E6%AC%A1%7C%E4%B8%A4%E6%AC%A1%7C%E4%B8%89%E6%AC%A1%7C%E6%9B%B4%E5%A4%9A%E6%AC%A1%7D%EF%BC%8C%E4%BD%86%E7%94%B5%E8%A7%86%E4%B8%8A%20%7B%E6%B2%A1%E5%95%A5%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E4%B8%9C%E8%A5%BF%EF%BC%8C%E6%89%80%E4%BB%A5%E5%85%B3%E4%B8%8A%E4%BA%86%E7%94%B5%E8%A7%86%7C%E4%BE%9D%E6%97%A7%E6%B2%A1%E4%BB%80%E4%B9%88%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E4%B8%9C%E8%A5%BF%7C%E6%AF%94%E4%BB%A5%E5%89%8D%E6%9B%B4%E4%B8%8D%E8%83%BD%E5%90%B8%E5%BC%95%E6%88%91%E7%9A%84%E5%85%B4%E8%B6%A3%E4%BA%86%7C%E5%8F%AA%E6%9C%89%E5%9E%83%E5%9C%BE%7C%E6%BC%94%E5%85%B3%E4%BA%8E%E9%B2%A8%E9%B1%BC%E7%9A%84%E8%8A%82%E7%9B%AE%E6%88%91%E5%B9%B6%E4%B8%8D%E5%96%9C%E6%AC%A2%E9%B2%A8%E9%B1%BC%7C%E4%BB%80%E4%B9%88%E9%83%BD%E6%B2%A1%E6%9C%89%7D%E3%80%82%5Cn%2B%20%5B%E5%86%8D%E8%AF%95%E8%AF%95%5D%20%20%20%20-%3E%20turn_on_television%5Cn*%20%5B%E5%8E%BB%E5%A4%96%E9%9D%A2%5D%20-%3E%20go_outside_instead%5Cn%3D%3D%3D%20go_outside_instead%20%3D%3D%3D%5Cn-%3E%20END%22%2C%22id%22%3A%2295XSB%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== turn_on_television ===  
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">我打开电视{一次|两次|三次|更多次}，但电视上 {没啥有意思的东西，所以关上了电视|依旧没什么有意思的东西|比以前更不能吸引我的兴趣了|只有垃圾|演关于鲨鱼的节目我并不喜欢鲨鱼|什么都没有}。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">+ [再试试]    -&gt; turn_on_television
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">* [去外面] -&gt; go_outside_instead
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== go_outside_instead ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt; END</span></span></pre></div></div></div><p> </p><h2 id="FGlAy">1.5 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#7-game-queries-and-functions" target="_blank" rel="noopener noreferrer">查询</a> queries</h2><p>INK 提供了一些有用的关于游戏状态“<span class="lake-fontsize-12" style="font-size: 12px;">game level”</span>查询，用于条件逻辑。它们不是语言的一部分，但它们总是有用的，并且不能由作者编辑。从某种意义上说，它们是语言的“标准库函数”。惯例是用大写字母来命名。</p><p> </p><h3 id="GjAFN">CHOICE_COUNT()</h3><p><code>CHOICE_COUNT</code> 返回到目前为止，当前区域内的选项数，例如：</p><p> </p><div id="QBg4k" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%5Ct%7Bfalse%7D%20Option%20A%5Cn*%20%7Btrue%7D%20Option%20B%5Cn*%20%7BCHOICE_COUNT()%20%3D%3D%201%7D%20Option%20C%22%2C%22id%22%3A%22QBg4k%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   {false} Option A
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">* {true} Option B
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">* {CHOICE_COUNT() == 1} Option C</span></span></pre></div></div></div><p> </p><p>false 表示不生成此选项，因此计数是1，显示的B和C（？）。</p><p> </p><figure class="image lake-drag-image"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F262531%2F1574084928723-3f196da5-79aa-476b-9dc2-ee86aa5bafb6.png%22%2C%22originWidth%22%3A1524%2C%22originHeight%22%3A115%2C%22name%22%3A%22image.png%22%2C%22size%22%3A9633%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A746%2C%22height%22%3A56%7D"><img title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574084928723-3f196da5-79aa-476b-9dc2-ee86aa5bafb6.png" data-is-external-image="true" alt="image.png" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574084928723-3f196da5-79aa-476b-9dc2-ee86aa5bafb6.png"></span></figure><p></p><p> </p><h3 id="nUKd9">TURNS()</h3><p><code>TURNS</code> 返回自游戏开始以来的回合数。</p><p> </p><div id="Xrawr" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%82%A8%E6%80%BB%E5%85%B1%E7%BB%8F%E5%8E%86%E4%BA%86%7BTURNS()%7D%E4%B8%AA%E7%BB%93%E7%82%B9%E3%80%82%22%2C%22id%22%3A%22Xrawr%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">您总共经历了{TURNS()}个结点。</span></span></pre></div></div></div><p> </p><figure class="image lake-drag-image"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F262531%2F1574085516084-7768dd9c-3279-4f98-b451-16774b27e164.png%22%2C%22originWidth%22%3A1558%2C%22originHeight%22%3A217%2C%22name%22%3A%22image.png%22%2C%22size%22%3A16124%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A779%2C%22height%22%3A109%7D"><img title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574085516084-7768dd9c-3279-4f98-b451-16774b27e164.png" data-is-external-image="true" alt="image.png" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574085516084-7768dd9c-3279-4f98-b451-16774b27e164.png"></span></figure><p></p><h3 id="CHNNL">TURNS_SINCE(-&gt; knot)</h3><p><code>TURNS_SINCE</code> 返回自上次访问特定结点或针脚的跳转次数（玩家输入的）。</p><p> </p><p>值为 0 表示"在经历这个区域"。</p><p> </p><div id="JU6Qn" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3Dlaugh%5Cn%E4%BD%A0%E7%AC%91%E4%B8%AA%E4%B8%8D%E5%81%9C%E2%80%A6%E2%80%A6%5Cn%2B%20%20%20%E5%93%88%E5%93%88%E5%93%88%E2%80%A6%E2%80%A6%20-%3E%20laugh%5Cn*%20%5Ct%7BTURNS_SINCE(-%3E%20laugh)%20%3D%3D%200%7D%20%E4%BD%A0%E5%B0%9D%E8%AF%95%E4%B8%8D%E7%AC%91%E4%BA%86-%3EEND%22%2C%22id%22%3A%22JU6Qn%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">==laugh
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">你笑个不停……
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">+   哈哈哈…… -&gt; laugh
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   {TURNS_SINCE(-&gt; laugh) == 0} 你尝试不笑了-&gt;END</span></span></pre></div></div></div><p> </p><p>值为 -1 表示"从未经历过"，其他任何正值都意味着“经历过多次了”。</p><p> </p><div id="QiM0S" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%5Ct%7BTURNS_SINCE(-%3E%20sleeping.intro)%20%3E%2010%7D%20%E4%BD%A0%E8%A7%89%E5%BE%97%E5%BE%88%E7%B4%AF%E2%80%A6%E2%80%A6%20-%3E%20sleeping%20%22%2C%22id%22%3A%22QiM0S%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   {TURNS_SINCE(-&gt; sleeping.intro) &gt; 10} 你觉得很累…… -&gt; sleeping </span></span></pre></div></div></div><p> </p><p>注意，这里实际只是向<code>TURNS_SINCE</code> 传递一个参数<code>“转移的目标”</code>，而非是跳转至结点地址，此处不进行节点跳转。</p><p> </p><h3 id="P9O3i">SEED_RANDOM()</h3><p><code>SEED_RANDOM</code> 出于测试目的，固定随机数生成器通常很有用，这会让每次播运行 INK 都固定产生相同的结果。你可以通过“种子”随机系统来实现。</p><p> </p><div id="9w0r6" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22~%20SEED_RANDOM(235)%22%2C%22id%22%3A%229w0r6%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">~ SEED_RANDOM(235)</span></span></pre></div></div></div><p> </p><p><span class="lake-fontsize-12" style="font-size: 12px;">传递给种子函数的数字可以是任意的，不同的种子将导致不同结果的序列。</span></p><p><span class="lake-fontsize-12" style="font-size: 12px;"> </span></p><figure class="image lake-drag-image"><span class="lake-fontsize-12" style="font-size: 12px;"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F262531%2F1574087802137-5cedc46e-1072-4255-b0d3-36ea47ad95ad.png%22%2C%22originWidth%22%3A1511%2C%22originHeight%22%3A140%2C%22name%22%3A%22image.png%22%2C%22size%22%3A13960%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A755.5%2C%22height%22%3A70%7D"><img title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574087802137-5cedc46e-1072-4255-b0d3-36ea47ad95ad.png" data-is-external-image="true" alt="image.png" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574087802137-5cedc46e-1072-4255-b0d3-36ea47ad95ad.png"></span></span></figure><p></p><figure class="image lake-drag-image"><span class="lake-fontsize-12" style="font-size: 12px;"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F262531%2F1574087910175-142e504c-8512-463f-81eb-aa8ee53dd38b.png%22%2C%22originWidth%22%3A1488%2C%22originHeight%22%3A149%2C%22name%22%3A%22image.png%22%2C%22size%22%3A13602%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A746%2C%22height%22%3A75%7D"><img title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574087910175-142e504c-8512-463f-81eb-aa8ee53dd38b.png" data-is-external-image="true" alt="image.png" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574087910175-142e504c-8512-463f-81eb-aa8ee53dd38b.png"></span></span></figure><p></p><figure class="image lake-drag-image"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F262531%2F1574087982421-449644d7-4d0d-48ef-9596-e537f561e64e.png%22%2C%22originWidth%22%3A1516%2C%22originHeight%22%3A146%2C%22name%22%3A%22image.png%22%2C%22size%22%3A14218%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A758%2C%22height%22%3A73%7D"><img title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574087982421-449644d7-4d0d-48ef-9596-e537f561e64e.png" data-is-external-image="true" alt="image.png" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574087982421-449644d7-4d0d-48ef-9596-e537f561e64e.png"></span></figure><p></p><p> </p><div id="3DLiL" data-card-type="block" data-lake-card="hr" data-card-value="data:%7B%22id%22%3A%223DLiL%22%7D"><hr></div><p> </p><h1 id="QmuLI">2. <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#part-2-weave" target="_blank" rel="noopener noreferrer">编织</a> weave</h1><p> </p><p>到目前为止，我们一直以最基础的方式构建故事的分支，从“选项”到“页面”。</p><p>但这要求我们命名故事中的每个目的地且保持唯一性，可能会减慢编写速度并阻挠较小的分支。</p><p>INK 拥有更为强大的语法，旨在简化始终向前的故事流（写起来像大多数的故事，而非计算机程序）。</p><p> </p><p>这种系统称为“编织”（weave），它由基础语法和选项语法，以及两个新功能构成：“收束标记 <code>-</code> ”，“选项与收束的嵌套”。</p><p> </p><h2 id="LLWSR">2.1 收束 gathers</h2><p>收束（gathers） <code>-</code> 将小分支收回到一起。让我们看这个例子：</p><p> </p><div id="LumZN" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E2%80%9C%E6%80%8E%E4%B9%88%E4%BA%86%EF%BC%9F%E2%80%9D%E6%88%91%E7%9A%84%E4%B8%BB%E4%BA%BA%E9%97%AE%E3%80%82%5Cn%5Ct*%5Ct%E2%80%9C%E6%88%91%E6%9C%89%E4%BA%9B%E7%B4%AF%E3%80%82%E2%80%9D%5B%5D%E6%88%91%E9%87%8D%E5%A4%8D%E9%81%93%E3%80%82%5Cn%5Ct%5Ct%E2%80%9C%E7%A1%AE%E5%AE%9E%EF%BC%8C%E2%80%9D%20%E4%BB%96%E7%AD%94%E9%81%93%E3%80%82%20%E2%80%9C%E8%BF%99%E5%A4%AA%E7%B3%9F%E4%BA%86%E3%80%82%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E6%B2%A1%E4%BA%8B%EF%BC%8C%E5%85%88%E7%94%9F%EF%BC%81%E2%80%9D%5B%5D%20%E6%88%91%E5%9B%9E%E5%BA%94%E9%81%93%E3%80%82%5Cn%5Ct*%20%20%E6%88%91%E8%AF%B4%EF%BC%8C%E8%BF%99%E6%AC%A1%E6%97%85%E8%A1%8C%E7%9C%9F%E5%8F%AF%E6%80%95%E3%80%82%E2%80%9D%5B%5D%20%E6%88%91%E4%B8%8D%E6%83%B3%E5%86%8D%E7%BB%A7%E7%BB%AD%E4%BA%86%E3%80%82%E2%80%9D%5Cn%5Ct%5Ct%E2%80%9C%E5%95%8A%EF%BC%8C%E2%80%9D%20%E4%BB%96%E6%9C%89%E4%BA%9B%E5%8A%A8%E5%AE%B9%E3%80%82%20%5C%22%E4%BD%A0%E7%9C%8B%E8%B5%B7%E6%9D%A5%E5%BE%88%E6%B2%AE%E4%B8%A7%E3%80%82%E6%98%8E%E5%A4%A9%EF%BC%8C%E6%83%85%E5%86%B5%E4%BC%9A%E5%A5%BD%E4%BA%9B%E7%9A%84%E3%80%82%5C%22%22%2C%22id%22%3A%22LumZN%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">“怎么了？”我的主人问。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “我有些累。”[]我重复道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “确实，” 他答道。 “这太糟了。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “没事，先生！”[] 我回应道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *  我说，这次旅行真可怕。”[] 我不想再继续了。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “啊，” 他有些动容。 "你看起来很沮丧。明天，情况会好些的。"</span></span></pre></div></div></div><p> </p><p>在真正的游戏中，这三个选项都可能导致相同的结果，Fogg 先生离开了房间。我们可用收束来执行此操作，而无需创建任何新结点或新跳转。</p><p> </p><div id="pxFGN" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E2%80%9C%E6%80%8E%E4%B9%88%E4%BA%86%EF%BC%9F%E2%80%9D%E6%88%91%E7%9A%84%E4%B8%BB%E4%BA%BA%E9%97%AE%E3%80%82%5Cn%5Ct*%5Ct%E2%80%9C%E6%88%91%E6%9C%89%E4%BA%9B%E7%B4%AF%E3%80%82%E2%80%9D%5B%5D%E6%88%91%E9%87%8D%E5%A4%8D%E9%81%93%E3%80%82%5Cn%5Ct%5Ct%E2%80%9C%E7%A1%AE%E5%AE%9E%EF%BC%8C%E2%80%9D%20%E4%BB%96%E7%AD%94%E9%81%93%E3%80%82%20%E2%80%9C%E8%BF%99%E5%A4%AA%E7%B3%9F%E4%BA%86%E3%80%82%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E6%B2%A1%E4%BA%8B%EF%BC%8C%E5%85%88%E7%94%9F%EF%BC%81%E2%80%9D%5B%5D%20%E6%88%91%E5%9B%9E%E5%BA%94%E9%81%93%E3%80%82%5Cn%5Ct*%20%20%E6%88%91%E8%AF%B4%EF%BC%8C%E8%BF%99%E6%AC%A1%E6%97%85%E8%A1%8C%E7%9C%9F%E5%8F%AF%E6%80%95%E3%80%82%E2%80%9D%5B%5D%20%E6%88%91%E4%B8%8D%E6%83%B3%E5%86%8D%E7%BB%A7%E7%BB%AD%E4%BA%86%E3%80%82%E2%80%9D%5Cn%5Ct%5Ct%E2%80%9C%E5%95%8A%EF%BC%8C%E2%80%9D%20%E4%BB%96%E6%9C%89%E4%BA%9B%E5%8A%A8%E5%AE%B9%E3%80%82%20%5C%22%E4%BD%A0%E7%9C%8B%E8%B5%B7%E6%9D%A5%E5%BE%88%E6%B2%AE%E4%B8%A7%E3%80%82%E6%98%8E%E5%A4%A9%EF%BC%8C%E6%83%85%E5%86%B5%E4%BC%9A%E5%A5%BD%E4%BA%9B%E7%9A%84%E3%80%82%5C%22%5Cn%20%20%20%20%5Cn%20%20%20%20-%5CtFogg%20%E5%85%88%E7%94%9F%E7%A6%BB%E5%BC%80%E4%BA%86%E6%88%BF%E9%97%B4%E3%80%82%22%2C%22id%22%3A%22pxFGN%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">“怎么了？”我的主人问。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “我有些累。”[]我重复道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “确实，” 他答道。 “这太糟了。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “没事，先生！”[] 我回应道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *  我说，这次旅行真可怕。”[] 我不想再继续了。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “啊，” 他有些动容。 "你看起来很沮丧。明天，情况会好些的。"
</span></span>    
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   Fogg 先生离开了房间。</span></span></pre></div></div></div><p> </p><p>我们可将这些“收束和分支”串在一起，让故事始终向前运行。</p><p> </p><div id="dd86S" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20escape%20%3D%3D%3D%20%5Cn%E6%88%91%E8%B7%91%E5%87%BA%E6%A3%AE%E6%9E%97%EF%BC%8C%E7%8B%97%E8%B7%9F%E5%9C%A8%E6%88%91%E5%90%8E%E9%9D%A2%E3%80%82%5Cn%5Cn%5Ct*%20%E6%88%91%E6%A3%80%E6%9F%A5%E4%BA%86%E4%B8%8B%E7%8F%A0%E5%AE%9D%5B%5D%EF%BC%8C%E9%83%BD%E8%BF%98%E5%9C%A8%E6%88%91%E7%9A%84%E9%92%B1%E5%8C%85%E9%87%8C%EF%BC%8C%E8%BF%99%E6%84%9F%E8%A7%89%E5%B0%B1%E5%83%8F%E6%AD%A5%E5%85%A5%E4%BA%86%E6%98%A5%E5%A4%A9%E3%80%82%20%3C%3E%5Cn%5Ct%5Cn%5Ct*%20%E6%88%91%E6%B2%A1%E5%81%9C%E4%B8%8B%E6%9D%A5%E5%96%98%E5%8F%A3%E6%B0%94%5B%5D%EF%BC%8C%E7%BB%A7%E7%BB%AD%E5%90%91%E5%89%8D%E8%B7%91%E3%80%82%3C%3E%5Cn%5Cn%5Ct*%5Ct%E6%88%91%E6%AC%A2%E5%91%BC%E4%BA%86%E5%87%BA%E6%9D%A5%E3%80%82%20%3C%3E%5Cn%5Cn-%20%5Ct%E8%B7%AF%E6%B2%A1%E5%A4%9A%E8%BF%9C%E4%BA%86%EF%BC%81Mackie%20%E4%BC%9A%E5%8F%91%E5%8A%A8%E5%BC%95%E6%93%8E%EF%BC%8C%E7%84%B6%E5%90%8E%E6%88%91%E5%B0%B1%E5%AE%89%E5%85%A8%E4%BA%86%E3%80%82%2F%2F%E6%94%B6%E6%9D%9F%5Cn%20%20%5Cn%5Ct*%5Ct%E6%88%91%E6%9D%A5%E5%88%B0%E8%B7%AF%E8%BE%B9%E5%9B%9B%E5%A4%84%E5%BC%A0%E6%9C%9B%5B%5D%E3%80%82%20%E4%BD%A0%E8%83%BD%E7%9B%B8%E4%BF%A1%E5%90%97%EF%BC%9F%5Cn%5Ct*%20%E6%88%91%E4%B8%8D%E8%AF%A5%E6%80%BB%E6%98%AF%E8%AF%B4%EF%BC%8CMackie%E4%B8%80%E7%9B%B4%E5%BE%88%E5%8F%AF%E9%9D%A0%5B%5D%E3%80%82%E4%BB%96%E4%BB%8E%E6%9C%AA%E8%AE%A9%E6%88%91%E5%A4%B1%E6%9C%9B%E8%BF%87%E3%80%82%E6%9B%B4%E7%A1%AE%E5%88%87%E5%9C%B0%E8%AF%B4%EF%BC%8C%E4%BB%8E%E6%9D%A5%E6%B2%A1%E6%9C%89%EF%BC%8C%E7%9B%B4%E5%88%B0%E9%82%A3%E6%99%9A%E5%89%8D%E3%80%82%5Cn%5Cn-%5Ct%E8%B7%AF%E6%97%81%E8%BE%B9%E6%98%AF%E7%A9%BA%E7%9A%84%E3%80%82%20Mackie%20%E4%B8%8D%E8%A7%81%E4%BA%86%E3%80%82%2F%2F%E5%86%8D%E6%AC%A1%E6%94%B6%E6%9D%9F%22%2C%22id%22%3A%22dd86S%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== escape === 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">我跑出森林，狗跟在我后面。
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * 我检查了下珠宝[]，都还在我的钱包里，这感觉就像步入了春天。 &lt;&gt;
</span></span>    
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * 我没停下来喘口气[]，继续向前跑。&lt;&gt;
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   我欢呼了出来。 &lt;&gt;
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   路没多远了！Mackie 会发动引擎，然后我就安全了。//收束
</span></span>  
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   我来到路边四处张望[]。 你能相信吗？
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * 我不该总是说，Mackie一直很可靠[]。他从未让我失望过。更确切地说，从来没有，直到那晚前。
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   路旁边是空的。 Mackie 不见了。//再次收束</span></span></pre></div></div></div><p> </p><p>这是最基本的编织。本节后面还详细介绍了编织的嵌套、包含选项和跳转、内部跳转、以及根据前面的经历来影响后续的内容。</p><p> </p><h3 id="dGPkT">编织的哲学</h3><p>编织不仅仅是方便分支收束，也是一种强大的内容创作的方式。上面的示例就已有4种路线，甚至可能会更复杂。使用普通的跳转，必须点到点的检查分支，且很容易出错。</p><p>通过编织，只需从顶部开始，就能运行到故事底部。在基本编织结构中，不会有跳转错误，编写的文本也很容易浏览。这意味着无需测试游戏中的所有分支，就能确保它们都能按预期工作。</p><p>使用编织还可以轻松修改选项，拆开故事并插入其他选项，而无需重新设计任何流程。</p><p> </p><h2 id="oEO1M">2.2 嵌套</h2><p>上面展示的编织是非常简单的“扁平”结构。不管玩家选什么，他们都要经历相同的回合数才能从上到下。但是，有时某些选项需要深或复。因此，编织可以嵌套。</p><p> </p><p>注意，编织的嵌套非常强大且紧凑，但你可能需要一些时间来适应！</p><p> </p><h3 id="RIa74">选项收束均可</h3><p>选项嵌套看下方的场景：</p><p> </p><div id="aiN3V" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%20%E2%80%9C%E5%A5%BD%E5%90%A7%EF%BC%8CPoirot%EF%BC%9F%E8%B0%8B%E6%9D%80%E8%BF%98%E6%98%AF%E8%87%AA%E6%9D%80%EF%BC%9F%E2%80%9D%5Cn*%5Ct%E2%80%9C%E8%B0%8B%E6%9D%80%EF%BC%81%E2%80%9D%5Cn*%20%E2%80%9C%E8%87%AA%E6%9D%80%EF%BC%81%E2%80%9D%5Cn-%5CtChristie%20%E5%A5%B3%E5%A3%AB%E7%89%87%E5%88%BB%E5%90%8E%E6%94%BE%E4%B8%8B%E6%89%8B%E6%8A%84%E3%80%82%E5%8F%B0%E4%B8%8B%E7%9A%84%E8%AF%84%E5%A7%94%E4%BB%AC%E9%83%BD%E7%9B%AE%E7%9E%AA%E5%8F%A3%E5%91%86%E3%80%82%22%2C%22id%22%3A%22aiN3V%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- “好吧，Poirot？谋杀还是自杀？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   “谋杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">* “自杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   Christie 女士片刻后放下手抄。台下的评委们都目瞪口呆。</span></span></pre></div></div></div><p> </p><p>提出的问题首选是“谋杀！” 或“自杀！”。如果 Poirot 宣布自杀，就没有其他事情可做了。但是在谋杀案中，还需要一个后续问题，“他怀疑是谁？”</p><p>我们可以通过一组嵌套的子选项来添加新选项。通过使用两个星号（<code>**</code>）而非是一个星号，告诉 INK 这些新选项是另一个选择的一部分。</p><p> </p><div id="Ifajm" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%20%20%E2%80%9C%E5%A5%BD%E5%90%A7%EF%BC%8CPoirot%EF%BC%9F%E8%B0%8B%E6%9D%80%E8%BF%98%E6%98%AF%E8%87%AA%E6%9D%80%EF%BC%9F%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E8%B0%8B%E6%9D%80%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct%E2%80%9C%E9%82%A3%E4%B9%88%EF%BC%8C%E4%BD%A0%E6%80%80%E7%96%91%E8%B0%81%EF%BC%9F%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E6%97%A5%E6%9C%AC%E6%8E%A2%E9%95%BF%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E8%88%B9%E9%95%BF%20Hastings%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E6%88%91%E8%87%AA%E5%B7%B1%EF%BC%81%E2%80%9D%5Cn%5Ct*%20%E2%80%9C%E8%87%AA%E6%9D%80%EF%BC%81%E2%80%9D%5Cn-%5CtChristie%20%E5%A5%B3%E5%A3%AB%E7%89%87%E5%88%BB%E5%90%8E%E6%94%BE%E4%B8%8B%E6%89%8B%E6%8A%84%E3%80%82%E5%8F%B0%E4%B8%8B%E7%9A%84%E8%AF%84%E5%A7%94%E4%BB%AC%E9%83%BD%E7%9B%AE%E7%9E%AA%E5%8F%A3%E5%91%86%E3%80%82%22%2C%22id%22%3A%22Ifajm%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-  “好吧，Poirot？谋杀还是自杀？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “谋杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “那么，你怀疑谁？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “日本探长！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “船长 Hastings！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “我自己！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * “自杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   Christie 女士片刻后放下手抄。台下的评委们都目瞪口呆。</span></span></pre></div></div></div><p> </p><p>（用缩进显示嵌套关系是个不错的习惯，即使编译器不在乎这些。）</p><p>如果我们想向另一条路线添加新的子选项，可以按类似的方式做。</p><p> </p><div id="KCDbn" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%20%20%E2%80%9C%E5%A5%BD%E5%90%A7%EF%BC%8CPoirot%EF%BC%9F%E8%B0%8B%E6%9D%80%E8%BF%98%E6%98%AF%E8%87%AA%E6%9D%80%EF%BC%9F%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E8%B0%8B%E6%9D%80%EF%BC%81%E2%80%9D%5Cn%5Ct%E2%80%9C%E9%82%A3%E4%B9%88%EF%BC%8C%E4%BD%A0%E6%80%80%E7%96%91%E8%B0%81%EF%BC%9F%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E6%97%A5%E6%9C%AC%E6%8E%A2%E9%95%BF%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E8%88%B9%E9%95%BF%20Hastings%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E6%88%91%E8%87%AA%E5%B7%B1%EF%BC%81%E2%80%9D%5Ct%5Cn%5Ct*%20%E2%80%9C%E8%87%AA%E6%9D%80%EF%BC%81%E2%80%9D%5Cn%5Ct%E2%80%9C%E7%9C%9F%E7%9A%84%E5%90%97%EF%BC%8CPoirot%EF%BC%9F%E4%BD%A0%E7%A1%AE%E5%AE%9A%E5%90%97%EF%BC%9F%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E7%A1%AE%E5%AE%9A%E3%80%82%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E8%BF%99%E5%BE%88%E6%98%8E%E6%98%BE%E3%80%82%E2%80%9D%5Cn-%5CtChristie%20%E5%A5%B3%E5%A3%AB%E7%89%87%E5%88%BB%E5%90%8E%E6%94%BE%E4%B8%8B%E6%89%8B%E6%8A%84%E3%80%82%E5%8F%B0%E4%B8%8B%E7%9A%84%E8%AF%84%E5%A7%94%E4%BB%AC%E9%83%BD%E7%9B%AE%E7%9E%AA%E5%8F%A3%E5%91%86%E3%80%82%22%2C%22id%22%3A%22KCDbn%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-  “好吧，Poirot？谋杀还是自杀？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “谋杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “那么，你怀疑谁？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “日本探长！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “船长 Hastings！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “我自己！” 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * “自杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “真的吗，Poirot？你确定吗？
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “确定。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “这很明显。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   Christie 女士片刻后放下手抄。台下的评委们都目瞪口呆。</span></span></pre></div></div></div><p> </p><p>现在，无论前面选择什么，最后都能收到 Christie 女士的出场。</p><p> </p><p>有时不只是更多的选项，可能还有更多的剧情。我们可以用收束嵌套解决这个问题。</p><p> </p><div id="iUNED" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%20%20%E2%80%9C%E5%A5%BD%E5%90%A7%EF%BC%8CPoirot%EF%BC%9F%E8%B0%8B%E6%9D%80%E8%BF%98%E6%98%AF%E8%87%AA%E6%9D%80%EF%BC%9F%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E8%B0%8B%E6%9D%80%EF%BC%81%E2%80%9D%5Cn%5Ct%E2%80%9C%E9%82%A3%E4%B9%88%EF%BC%8C%E4%BD%A0%E6%80%80%E7%96%91%E8%B0%81%EF%BC%9F%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E6%97%A5%E6%9C%AC%E6%8E%A2%E9%95%BF%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E8%88%B9%E9%95%BF%20Hastings%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E6%88%91%E8%87%AA%E5%B7%B1%EF%BC%81%E2%80%9D%5Ct%5Cn%20%20%20%20-%20-%20%20%E2%80%9C%E4%BD%A0%E4%B8%80%E5%AE%9A%E6%98%AF%E5%9C%A8%E5%BC%80%E7%8E%A9%E7%AC%91%EF%BC%81%E2%80%9D%5Cn%20%20%20%20*%20*%20%20%E2%80%9C%E6%9C%8B%E5%8F%8B%EF%BC%8C%E6%88%91%E6%98%AF%E8%AE%A4%E7%9C%9F%E7%9A%84%EF%BC%81%E2%80%9D%5Ct%5Cn%20%20%20%20*%20*%20%20%E2%80%9C%E8%A6%81%E6%98%AF%E2%80%A6%E2%80%A6%E2%80%9D%5Ct%5Cn%5Ct*%20%E2%80%9C%E8%87%AA%E6%9D%80%EF%BC%81%E2%80%9D%5Cn%5Ct%E2%80%9C%E7%9C%9F%E7%9A%84%E5%90%97%EF%BC%8CPoirot%EF%BC%9F%E4%BD%A0%E7%A1%AE%E5%AE%9A%E5%90%97%EF%BC%9F%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E7%A1%AE%E5%AE%9A%E3%80%82%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%20%E2%80%9C%E8%BF%99%E5%BE%88%E6%98%8E%E6%98%BE%E3%80%82%E2%80%9D%5Cn-%5CtChristie%20%E5%A5%B3%E5%A3%AB%E7%89%87%E5%88%BB%E5%90%8E%E6%94%BE%E4%B8%8B%E6%89%8B%E6%8A%84%E3%80%82%E5%8F%B0%E4%B8%8B%E7%9A%84%E8%AF%84%E5%A7%94%E4%BB%AC%E9%83%BD%E7%9B%AE%E7%9E%AA%E5%8F%A3%E5%91%86%E3%80%82%22%2C%22id%22%3A%22iUNED%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-  “好吧，Poirot？谋杀还是自杀？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “谋杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “那么，你怀疑谁？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “日本探长！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “船长 Hastings！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “我自己！” 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - -  “你一定是在开玩笑！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * *  “朋友，我是认真的！”    
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * *  “要是……” 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * “自杀！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “真的吗，Poirot？你确定吗？
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “确定。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *  “这很明显。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   Christie 女士片刻后放下手抄。台下的评委们都目瞪口呆。</span></span></pre></div></div></div><p> </p><figure class="image lake-drag-image">如果玩家选择谋杀，在这一分支后面会有两组选项，完全是“扁平”编织的。<span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fgif%2F262531%2F1574171238244-e472627d-0e0d-4ae3-9389-795719dee627.gif%22%2C%22originWidth%22%3A1592%2C%22originHeight%22%3A505%2C%22name%22%3A%221.gif%22%2C%22size%22%3A190315%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A1592%2C%22height%22%3A505%7D"><img title="1.gif" src="https://cdn.nlark.com/yuque/0/2019/gif/262531/1574171238244-e472627d-0e0d-4ae3-9389-795719dee627.gif" data-is-external-image="true" alt="1.gif" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/gif/262531/1574171238244-e472627d-0e0d-4ae3-9389-795719dee627.gif"></span></figure><p></p><p> </p><p>收束是直观的，但它们的行为很难说出来：通常在选择之后，故事会找到下一个非更低级的收束，并移动下来。基本思想是：选项将故事的支线分开，并通过收束将它们重新合在一起。（因此，这被称为“编织”！）</p><p> </p><h3 id="VyhpD">嵌套可以很多层</h3><p>上面我们使用了两层嵌套。事实上，你深入嵌套多少层都没有限制。</p><p> </p><div id="JfJtT" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%5Ct%E2%80%9C%E8%AE%B2%E4%B8%AA%E6%95%85%E4%BA%8B%EF%BC%8C%E8%88%B9%E9%95%BF%EF%BC%81%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E5%A5%BD%E5%90%A7%EF%BC%8C%E4%BD%A0%E4%BB%AC%E8%BF%99%E4%BA%9B%E6%B5%B7%E7%8B%97%E3%80%82%20%E6%9C%89%E4%B8%AA%E6%95%85%E4%BA%8B...%E2%80%9D%5Cn%5Ct%5Ct*%20*%20%5Ct%E2%80%9C%E4%B8%80%E4%B8%AA%E6%BC%86%E9%BB%91%E7%8B%82%E9%A3%8E%E6%9A%B4%E9%9B%A8%E7%9A%84%E5%A4%9C%E6%99%9A...%E2%80%9D%5Cn%5Ct%5Ct%5Ct%5Ct*%20*%20*%20%5Ct%E2%80%9C...%E8%88%B9%E5%91%98%E4%BB%AC%E9%83%BD%E5%BE%88%E4%B8%8D%E5%AE%89...%E2%80%9D%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct*%20*%20*%20*%20%20%E2%80%9C...%20%E4%BB%96%E4%BB%AC%E5%AF%B9%E8%88%B9%E9%95%BF%E8%AF%B4...%5C%22%E2%80%9D%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct*%20*%20*%20*%20*%5Ct%5Ct%E2%80%9C...%E7%BB%99%E6%88%91%E4%BB%AC%E8%AE%B2%E4%B8%AA%E6%95%85%E4%BA%8B%EF%BC%8C%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E4%B8%8D%EF%BC%8C%E5%B7%B2%E7%BB%8F%E8%BF%87%E4%BA%86%E4%BD%A0%E4%BB%AC%E7%9D%A1%E8%A7%89%E7%9A%84%E6%97%B6%E9%97%B4%E3%80%82%E2%80%9D%5Cn-%5Ct%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E4%BA%BA%EF%BC%8C%E8%88%B9%E5%91%98%E4%BB%AC%E5%BC%80%E5%A7%8B%E6%89%93%E8%B5%B7%E5%93%88%E6%AC%A0%E3%80%82%22%2C%22id%22%3A%22JfJtT%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   “讲个故事，船长！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “好吧，你们这些海狗。 有个故事...”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        * *     “一个漆黑狂风暴雨的夜晚...”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">                * * *   “...船员们都很不安...”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">                        * * * *  “... 他们对船长说..."”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">                                * * * * *       “...给我们讲个故事，”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “不，已经过了你们睡觉的时间。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   作为一个人，船员们开始打起哈欠。</span></span></pre></div></div></div><p> </p><p>这样下去，整个嵌套都会变得难以阅读或操作。因此，如果子选项变得笨拙，跳转到新针脚上是一种好习惯。</p><p>但至少在理论上，你可以把你整个故事都写成一个编织。</p><p> </p><p>再看一个更长的例子：</p><p> </p><div id="H2rwB" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%20%E6%88%91%E7%9C%8B%E7%9D%80%20Fogg%20%E5%85%88%E7%94%9F%5Cn*%5Ct...%20%E6%88%91%E5%86%8D%E4%B9%9F%E6%8E%A7%E5%88%B6%E4%B8%8D%E4%BD%8F%E8%87%AA%E5%B7%B1%E4%BA%86%E3%80%82%5Cn%5Ct%E2%80%9C%E5%85%88%E7%94%9F%EF%BC%8C%E6%88%91%E4%BB%AC%E8%BF%99%E6%AC%A1%E6%97%85%E8%A1%8C%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E2%80%9D%5Cn%5Ct%E2%80%9C%E6%89%93%E8%B5%8C%EF%BC%8C%E2%80%9D%E4%BB%96%E7%AD%94%E9%81%93%E3%80%82%5Cn%5Ct*%20*%20%5Ct%E2%80%9C%E6%89%93%E8%B5%8C%EF%BC%81%E2%80%9D%5B%5D%E6%88%91%E5%9B%9E%E5%BA%94%E9%81%93%E3%80%82%5Cn%5Ct%5Ct%5Ct%E4%BB%96%E7%82%B9%E4%BA%86%E7%82%B9%E5%A4%B4%E3%80%82%20%5Cn%5Ct%5Ct%5Ct*%20*%20*%20%5Ct%E2%80%9C%E4%BD%86%E8%BF%99%E7%A1%AE%E5%AE%9E%E5%BE%88%E8%A0%A2%EF%BC%81%E2%80%9D%5Cn%5Ct%5Ct%5Ct*%20*%20*%20%20%20%E2%80%9C%E8%BF%99%E5%A4%AA%E7%B3%9F%E4%BA%86%E5%90%A7%EF%BC%9F%E2%80%9D%5Cn%5Ct%5Ct%5Ct-%20-%20-%20%5Ct%E4%BB%96%E5%8F%88%E7%82%B9%E4%BA%86%E7%82%B9%E5%A4%B4%E3%80%82%5Cn%5Ct%5Ct%5Ct*%20*%20*%5Ct%5Ct%E2%80%9C%E5%8F%AF%E6%98%AF%E6%88%91%E4%BB%AC%E8%83%BD%E8%B5%A2%E5%90%97%EF%BC%9F%E2%80%9D%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%E2%80%9C%E8%BF%99%E6%AD%A3%E6%98%AF%E6%88%91%E4%BB%AC%E8%A6%81%E5%8A%AA%E5%8A%9B%E5%AE%9E%E7%8E%B0%E7%9A%84%E3%80%82%E2%80%9D%20%E4%BB%96%E5%9B%9E%E7%AD%94%E9%81%93%E3%80%82%5Cn%5Ct%5Ct%5Ct*%20*%20*%5Ct%5Ct%E2%80%9C%E6%88%91%E7%8C%9C%EF%BC%8C%E8%B5%8C%E6%B3%A8%E5%BE%88%E6%98%8E%E6%99%BA%EF%BC%9F%E2%80%9D%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%E2%80%9C%E4%B8%A4%E4%B8%87%E8%8B%B1%E9%95%91%EF%BC%8C%E2%80%9D%E4%BB%96%E5%9B%9E%E7%AD%94%E5%BE%97%E7%9B%B4%E6%88%AA%E4%BA%86%E5%BD%93%E3%80%82%5Cn%5Ct%5Ct%5Ct*%20*%20*%20%5Ct%E6%88%91%E5%BD%93%E6%97%B6%E6%B2%A1%E5%9C%A8%E9%97%AE%E4%BB%96%E5%88%AB%E7%9A%84%5B%5D%EF%BC%8C%E4%BB%96%E7%A4%BC%E8%B2%8C%E5%BE%97%E5%92%B3%E5%97%BD%E4%BA%86%E4%B8%80%E5%A3%B0%EF%BC%8C%E4%B9%9F%E6%B2%A1%E5%9C%A8%E5%AF%B9%E6%88%91%E8%AF%B4%E4%BB%80%E4%B9%88%E3%80%82%20%3C%3E%5Cn%5Ct*%20*%20%5Ct%E2%80%9C%E5%95%8A%5B%E3%80%82%E2%80%9D%5D%EF%BC%8C%E2%80%9D%20%E6%88%91%E5%9B%9E%E5%BA%94%E9%81%93%EF%BC%8C%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%88%91%E5%9C%A8%E6%83%B3%E4%BB%80%E4%B9%88%E3%80%82%5Cn%5Ct-%20-%20%5Ct%E4%B9%8B%E5%90%8E%EF%BC%8C%20%3C%3E%5Cn*%5Ct...%20%E4%BD%86%E6%88%91%E4%BB%80%E4%B9%88%E4%B9%9F%E6%B2%A1%E8%AF%B4%5B%5D%E3%80%82%3C%3E%20%5Cn-%20%E6%88%91%E4%BB%AC%E5%9C%A8%E6%B2%89%E9%BB%98%E4%B8%AD%E5%BA%A6%E8%BF%87%E4%BA%86%E8%BF%99%E4%B8%80%E5%A4%A9%E3%80%82%5Cn-%20-%3E%20END%22%2C%22id%22%3A%22H2rwB%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- 我看着 Fogg 先生
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   ... 我再也控制不住自己了。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “先生，我们这次旅行的目的是什么？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “打赌，”他答道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * *     “打赌！”[]我回应道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            他点了点头。 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            * * *   “但这确实很蠢！”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            * * *   “这太糟了吧？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            - - -   他又点了点头。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            * * *       “可是我们能赢吗？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">                            “这正是我们要努力实现的。” 他回答道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            * * *       “我猜，赌注很明智？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">                            “两万英镑，”他回答得直截了当。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            * * *   我当时没在问他别的[]，他礼貌得咳嗽了一声，也没在对我说什么。 &lt;&gt;
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * *     “啊[。”]，” 我回应道，不确定我在想什么。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - -     之后， &lt;&gt;
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   ... 但我什么也没说[]。&lt;&gt; 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- 我们在沉默中度过了这一天。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- -&gt; END</span></span></pre></div></div></div><p> </p><p><span class="lake-fontsize-12" style="font-size: 12px;">这里验证了之前的哲学：编织提供了一种紧凑的方式，在有大量分支大量选择的同时，故事依然能顺利的从头走到尾！</span></p><p><span class="lake-fontsize-12" style="font-size: 12px;"> </span></p><h2 id="jcdLX">2.3 编织定位 </h2><p>有时候只是编织结构就足够了，但有时我们还需要更多的控制权。</p><p>在默认情况下，编织中的内容没有地址或标签，这意味着它们不能被跳转到，也无法对其进行测试。在最基本的编织结构中，选项会改变玩家经历；可一旦走过编织，这些经历就会被遗忘。</p><p> </p><p>但如果我们想记录玩家的经历，我们可贴上“标签语法”<span class="lake-fontsize-11" style="font-size: 11px;">(label_name)</span>。</p><p> </p><h3 id="ABPo9">贴标签 (label_name)</h3><p>任何层嵌套的收束都可以使用括号贴标签。<code>-  (top)</code></p><p>贴上标签后，可以跳转至此或进行测试，就像结点和针脚一样。这意味着在编织中你可使用之前的语法来管理内容，同时保持清晰稳定的优点。</p><p>选项也可以用括号贴标签，就像收束一样。标签括号应位于条件之前。</p><p>这些地址也可用于条件测试中，这对测试“由其他选项解锁的选项”很有用。</p><p> </p><div id="TGGkU" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20meet_guard%20%3D%3D%3D%5Cn%E5%8D%AB%E5%85%B5%E5%9C%A8%E7%9B%AF%E7%9D%80%E4%BD%A0%E3%80%82%5Cn%5Cn*%20%5Ct(greet)%20%5B%E6%89%93%E6%8B%9B%E5%91%BC%5D%5Cn%5Ct%E2%80%9C%E6%97%A9%E3%80%82%E2%80%9D%5Cn*%5Ct(get_out)%20%E2%80%9C%E8%AE%A9%E5%BC%80%5B%E3%80%82%E2%80%9D%5D%EF%BC%8C%E2%80%9D%20%E4%BD%A0%E5%AF%B9%E5%8D%AB%E5%85%B5%E8%AF%B4%E3%80%82%5Cn%5Cn-%20%5Ct%E2%80%9C%E5%97%AF%EF%BC%8C%E2%80%9D%E5%8D%AB%E5%85%B5%E5%9B%9E%E5%BA%94%E9%81%93%E3%80%82%5Cn%5Cn*%5Ct%7Bgreet%7D%20%5Ct%E2%80%9C%E5%A4%A9%E6%B0%94%E4%B8%8D%E9%94%99%E5%93%88%EF%BC%9F%E2%80%9D%20%2F%2F%20%E5%BD%93%E4%BD%A0%E9%80%89%E6%89%93%E6%8B%9B%E5%91%BC%5Cn%5Cn*%20%5Ct%E2%80%9C%E5%92%A6%EF%BC%9F%E2%80%9D%5B%5D%20%E4%BD%A0%E5%9B%9E%E5%BA%94%E9%81%93%EF%BC%9F%5Cn%5Cn*%5Ct%7Bget_out%7D%20%5B%E6%8A%8A%E4%BB%96%E6%8E%A8%E5%88%B0%E4%B8%80%E6%97%81%5D%20%5Ct%20%2F%2F%20%E5%BD%93%E4%BD%A0%E5%A8%81%E8%83%81%E4%BB%96%E6%97%B6%5Cn%5Ct%E4%BD%A0%E6%8A%8A%E4%BB%96%E6%8E%A8%E5%88%B0%E4%B8%80%E6%97%81%E3%80%82%E4%BD%9C%E4%B8%BA%E7%A4%BC%E5%B0%9A%E5%BE%80%E6%9D%A5%EF%BC%8C%E5%8D%AB%E5%85%B5%E7%9B%B4%E6%8E%A5%E6%8B%94%E5%87%BA%E4%BA%86%E5%89%91%E3%80%82%5Cn%5Ct-%3E%20fight_guard%20%5Ct%5Ct%5Ct%2F%2F%20%E8%B7%B3%E5%87%BA%E7%BC%96%E7%BB%87%5Cn%5Cn-%5Ct%E2%80%9C%E5%97%AF%E3%80%82%E2%80%9D%20%E5%8D%AB%E5%85%B5%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E5%B0%8F%E7%BA%B8%E8%A2%8B%E3%80%82%E2%80%9C%E5%A4%AA%E5%A6%83%E7%B3%96%EF%BC%9F%E2%80%9D%22%2C%22id%22%3A%22TGGkU%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== meet_guard ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">卫兵在盯着你。
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   (greet) [打招呼]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “早。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   (get_out) “让开[。”]，” 你对卫兵说。
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   “嗯，”卫兵回应道。
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   {greet}     “天气不错哈？” // 当你选打招呼
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   “咦？”[] 你回应道？
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   {get_out} [把他推到一旁]   // 当你威胁他时
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你把他推到一旁。作为礼尚往来，卫兵直接拔出了剑。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; fight_guard          // 跳出编织
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   “嗯。” 卫兵给你一个小纸袋。“太妃糖？”</span></span></pre></div></div></div><p> </p><h3 id="7Q9Ra">范围</h3><p>在同一块编织内，你可只简单的写标签名称；到外面则需要写路径，像同个结点下的不同针脚：</p><p> </p><div id="M7QhH" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20knot%20%3D%3D%3D%5Cn%3D%20stitch_one%20%5Cn%5Ct-%20(gatherpoint)%20Some%20content.%5Cn%3D%20stitch_two%20%5Cn%5Ct*%5Ct%7Bstitch_one.gatherpoint%7D%20Option%22%2C%22id%22%3A%22M7QhH%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== knot ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= stitch_one 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - (gatherpoint) Some content.
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= stitch_two 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   {stitch_one.gatherpoint} Option</span></span></pre></div></div></div><p> </p><p>或到另一个结点：</p><p> </p><div id="Igtua" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20knot_one%20%3D%3D%3D%5Cn-%5Ct(gather_one)%5Cn%5Ct*%20%7Bknot_two.stitch_two.gather_two%7D%20Option%5Cn%5Ct%5Cn%3D%3D%3D%20knot_two%20%3D%3D%3D%5Cn%3D%20stitch_two%20%5Cn%5Ct-%20(gather_two)%20%5Cn%5Ct%5Ct*%5Ct%7Bknot_one.gather_one%7D%20Option%22%2C%22id%22%3A%22Igtua%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== knot_one ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   (gather_one)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    * {knot_two.stitch_two.gather_two} Option
</span></span>    
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== knot_two ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= stitch_two 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - (gather_two) 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        *   {knot_one.gather_one} Option</span></span></pre></div></div></div><p> </p><h3 id="mdDNZ">更多技巧</h3><p>事实上，即使没有看到收束，INK 内的所有内容都是在编织中的。这意味着游戏中的所有选项都可贴标签，然后使用它的地址。特别的，这意味着你可以测试玩家为达到特定结果，选了哪个选项。</p><p> </p><div id="mz62Y" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20fight_guard%20%3D%3D%3D%5Cn...%5Cn%3D%20throw_something%20%5Cn*%5Ct(rock)%20%5B%E4%B8%A2%E7%9F%B3%E5%A4%B4%5D%20-%3E%20throw%5Cn*%20(sand)%20%5B%E6%89%94%E6%B2%99%E5%AD%90%5D%20-%3E%20throw%5Cn%5Cn%3D%20throw%5Cn%E4%BD%A0%E5%90%91%E5%8D%AB%E5%85%B5%E6%89%94%E4%BA%86%7Bthrow_something.rock%3A%E4%B8%80%E5%9D%97%E7%9F%B3%E5%A4%B4%7C%E4%B8%80%E6%8A%8A%E6%B2%99%E5%AD%90%7D%E3%80%82%22%2C%22id%22%3A%22mz62Y%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== fight_guard ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">...
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= throw_something 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   (rock) [丢石头] -&gt; throw
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">* (sand) [扔沙子] -&gt; throw
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">= throw
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">你向卫兵扔了{throw_something.rock:一块石头|一把沙子}。</span></span></pre></div></div></div><p> </p><p>我们能用贴标签创建内部循环，这是询问NPC的标准模式，<a href="https://inky-guard.netlify.com/" target="_blank" rel="noopener noreferrer">体验故事运行</a>。</p><p> </p><div id="g13Vi" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%20(opts)%5Cn%5Ct*%5Ct%E2%80%9C%E6%88%91%E4%BB%8E%E5%93%AA%E8%83%BD%E5%BC%84%E5%88%B0%E5%88%B6%E6%9C%8D%E5%90%97%EF%BC%9F%E2%80%9D%5B%5D%20%E4%BD%A0%E8%AF%A2%E9%97%AE%E5%BF%AB%E4%B9%90%E7%9A%84%E5%8D%AB%E5%85%B5%E3%80%82%5Cn%5Ct%5Ct%E2%80%9C%E5%BD%93%E7%84%B6%EF%BC%8C%E5%9C%A8%E5%82%A8%E7%89%A9%E6%9F%9C%E9%82%A3%E3%80%82%E2%80%9D%E4%BB%96%E7%AC%91%E7%9D%80%E8%AF%B4%E3%80%82%20%E2%80%9C%E4%B8%8D%E8%BF%87%E5%8F%AF%E8%83%BD%E4%B8%8D%E5%A4%AA%E5%90%88%E8%BA%AB%E3%80%82%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E5%91%8A%E8%AF%89%E6%88%91%E5%AE%89%E9%98%B2%E7%B3%BB%E7%BB%9F%E3%80%82%E2%80%9D%5Cn%5Ct%5Ct%E2%80%9C%E4%BB%96%E5%BE%88%E8%80%81%EF%BC%8C%E2%80%9D%20%E5%8D%AB%E5%85%B5%E5%90%91%E4%BD%A0%E4%BF%9D%E8%AF%81%E3%80%82%20%E2%80%9C%E5%B0%B1%E5%83%8F%E5%8F%A4%E8%91%A3%E4%B8%80%E6%A0%B7%E8%80%81%E3%80%82%E2%80%9D%5Cn%5Ct*%5Ct%E2%80%9C%E8%BF%99%E9%87%8C%E7%9A%84%E7%8B%97%EF%BC%9F%E2%80%9D%5Cn%5Ct%5Ct%E2%80%9C%E5%BE%88%E5%A4%9A%E5%BE%88%E5%A4%9A%E3%80%82%E2%80%9D%20%E5%8D%AB%E5%85%B5%E7%AD%94%E9%81%93%EF%BC%8C%E5%B9%B6%E5%92%A7%E5%98%B4%E4%B8%80%E7%AC%91%E3%80%82%20%E2%80%9C%E4%B9%9F%E9%83%BD%E6%98%AF%E9%A5%BF%E9%AC%BC%E3%80%82%E2%80%9D%5Cn%5Ct%2F%2F%E8%A6%81%E6%B1%82%E7%8E%A9%E5%AE%B6%E8%87%B3%E5%B0%91%E9%97%AE%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98%5Cn%5Ct*%5Ct%7Bloop%7D%20%5B%E9%97%AE%E5%A4%9F%E4%BA%86%5D%20%5Cn%5Ct%5Ct-%3E%20done%5Cn-%20(loop)%20%2F%2F%20%E5%9C%A8%E8%AD%A6%E5%8D%AB%E5%8E%8C%E7%83%A6%E5%89%8D%E5%BE%AA%E7%8E%AF%E5%87%A0%E5%9C%88%5Cn%5Ct%7B%20-%3E%20opts%20%7C%20-%3E%20opts%20%7C%20%7D%20%2F%2F%E5%BA%8F%E5%88%97%E5%8F%AF%E5%8F%98%E6%96%87%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%8D%AB%E5%85%B5%E6%98%AF%E5%90%A6%E5%8E%8C%E7%83%A6%5Cn%5Ct%E4%BB%96%E6%8C%A0%E6%8C%A0%E5%A4%B4%EF%BC%8C%5Cn%5Ct%E2%80%9C%E5%A5%BD%E5%90%A7%EF%BC%8C%E4%B8%8D%E8%83%BD%E6%95%B4%E5%A4%A9%E5%8F%AA%E7%AB%99%E7%9D%80%E8%AF%B4%E8%AF%9D%E3%80%82%E2%80%9D%E4%BB%96%E8%AF%B4%E5%88%B0%E3%80%82%5Cn-%20(done)%5Cn%5Ct%E4%BD%A0%E8%B0%A2%E8%BF%87%E8%AD%A6%E5%8D%AB%EF%BC%8C%E4%BE%BF%E7%A6%BB%E5%BC%80%E4%BA%86%E3%80%82%22%2C%22id%22%3A%22g13Vi%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (opts)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “我从哪能弄到制服吗？”[] 你询问快乐的卫兵。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “当然，在储物柜那。”他笑着说。 “不过可能不太合身。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “告诉我安防系统。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “他很老，” 卫兵向你保证。 “就像古董一样老。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   “这里的狗？”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “很多很多。” 卫兵答道，并咧嘴一笑。 “也都是饿鬼。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    //要求玩家至少问一个问题
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   {loop} [问够了] 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; done
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (loop) // 在警卫厌烦前循环几圈
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    { -&gt; opts | -&gt; opts | } //序列可变文本控制卫兵是否厌烦
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    他挠挠头，
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “好吧，不能整天只站着说话。”他说到。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (done)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你谢过警卫，便离开了。</span></span></pre></div></div></div><p> </p><p>选项也可以被跳转到，就好像选择了该选项一样。因此，显示的内容会忽略 <code>[]</code> 中的文本，并如果该选项是一次性选项，它将被用掉。</p><p> </p><div id="0MC3K" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%20(opts)%5Cn*%5Ct%5B%E5%81%9A%E9%AC%BC%E8%84%B8%5D%5Cn%5Ct%E4%BD%A0%E5%81%9A%E9%AC%BC%E8%84%B8%EF%BC%8C%E5%A3%AB%E5%85%B5%E5%B0%B1%E5%86%B2%E4%BD%A0%E6%9D%A5%E4%BA%86%EF%BC%81%20-%3E%20shove%5Cn%5Cn*%5Ct(shove)%20%5B%E6%8A%8A%E8%AD%A6%E5%8D%AB%E6%8E%A8%E5%88%B0%E4%B8%80%E6%97%81%5D%20%E4%BD%A0%E6%8A%8A%E5%8D%AB%E5%85%B5%E6%8E%A8%E5%88%B0%E4%B8%80%E6%97%81%EF%BC%8C%E4%BD%86%E4%BB%96%E5%9B%9E%E6%9D%A5%E4%BA%86%E3%80%82%5Cn*%5Ct%7Bshove%7D%20%5B%E8%BF%9B%E5%85%A5%E6%88%98%E6%96%97%5D%20-%3E%20fight_the_guard%5Cn%5Cn-%20%5Ct-%3E%20opts%22%2C%22id%22%3A%220MC3K%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (opts)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [做鬼脸]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你做鬼脸，士兵就冲你来了！ -&gt; shove
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   (shove) [把警卫推到一旁] 你把卫兵推到一旁，但他回来了。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   {shove} [进入战斗] -&gt; fight_the_guard
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   -&gt; opts</span></span></pre></div></div></div><p> </p><p>选项中可直接收束。注意下方第一个选项下二级收束并没其收束作用，而是方便第二个选项的跳转。</p><p> </p><div id="6KgVo" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%5Ct%E2%80%9C%E8%BF%98%E5%A5%BD%E5%90%A7%EF%BC%8C%E5%85%88%E7%94%9F%E2%80%9D%5B%5D%E6%88%91%E9%97%AE%E3%80%82%5Cn%5Ct-%20-%20(quitewell)%20%E2%80%9C%E6%8C%BA%E5%A5%BD%E7%9A%84%EF%BC%8C%E2%80%9D%E4%BB%96%E7%AD%94%E9%81%93%E3%80%82%20%5Cn*%5Ct%E2%80%9C%E4%BD%A0%E5%A1%AB%E5%AD%97%E6%B8%B8%E6%88%8F%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%8C%E5%85%88%E7%94%9F%EF%BC%9F%E2%80%9D%5B%5D%E6%88%91%E9%97%AE%E3%80%82%5Cn%5Ct-%3E%20quitewell%20%5Cn*%5Ct%E6%88%91%E4%BB%80%E4%B9%88%E4%B9%9F%E6%B2%A1%E8%AF%B4%5B%5D%EF%BC%8C%E6%88%91%E7%9A%84%E4%B8%BB%E4%BA%BA%E4%BB%80%E4%B9%88%E4%B9%9F%E6%B2%A1%E8%AF%B4%E3%80%82%5Cn-%5Ct%E6%88%91%E4%BB%AC%E5%8F%88%E6%84%9F%E5%88%B0%E4%BA%86%E4%B8%80%E6%AC%A1%E5%80%8D%E6%84%9F%E4%BA%B2%E5%88%87%E7%9A%84%E6%B2%89%E9%BB%98%E3%80%82%22%2C%22id%22%3A%226KgVo%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   “还好吧，先生”[]我问。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - - (quitewell) “挺好的，”他答道。 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   “你填字游戏怎么样，先生？”[]我问。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; quitewell 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   我什么也没说[]，我的主人什么也没说。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   我们又感到了一次倍感亲切的沉默。</span></span></pre></div></div></div><p> </p><div id="lkymI" data-card-type="block" data-lake-card="hr" data-card-value="data:%7B%22id%22%3A%22lkymI%22%7D"><hr></div><blockquote><p>后面的内容较为复杂，本文只选取了部分简单的内容进行翻译。如有兴趣请浏览<a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md" target="_blank" rel="noopener noreferrer">官方文档</a>。</p></blockquote><p> </p><h1 id="h34Xc">3. <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#part-3-variables-and-logic" target="_blank" rel="noopener noreferrer">变量与逻辑</a></h1><p>到目前为止，我们已经根据玩家看到的东西，做出了条件文本与条件选项。</p><p> </p><p>INK 还支持临时变量与全局变量，存储数字和内容数据，甚至故事流命令；逻辑功能也很齐全，并包含一些额外的结构，以帮助组织更复杂的故事结构。</p><h2 id="2HBtl">3.1 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#1-global-variables" target="_blank" rel="noopener noreferrer">全局变量</a> global variables</h2><p>最强大的变量，储存游戏某些独特状态属性的变量，对每个故事来说可能都最有用的——从主人公口袋里的钱，到主人公精神状态的SAN值。</p><p><span class="lake-fontsize-12" style="font-size: 12px;"><br></span>这种变量称为全局变量（<code>global variables</code>），因为可以从故事中的任何位置访问（包括设置和读取）它。（传统情况下，编程会试图避免这种情况，因为它可能会相互冲突。但故事有所不同，有一些事物贯穿始终，全局需要并一直存在。 ）</p><p> </p><p>全局变量可以通过语句 <span class="lake-fontsize-11" style="font-size: 11px;">VAR</span> 定义在任何地方。给它们指定一个初始值，定义它们是哪种类型的变量：整数、浮点（十进制）、内容或故事的地址。</p><p> </p><div id="6DidE" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22VAR%20knowledge_of_the_cure%20%3D%20false%5CnVAR%20players_name%20%3D%20%5C%22Emilia%5C%22%5CnVAR%20number_of_infected_people%20%3D%20521%5CnVAR%20current_epilogue%20%3D%20-%3E%20they_all_die_of_the_plague%22%2C%22id%22%3A%226DidE%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">VAR knowledge_of_the_cure = false
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">VAR players_name = "Emilia"
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">VAR number_of_infected_people = 521
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">VAR current_epilogue = -&gt; they_all_die_of_the_plague</span></span></pre></div></div></div><p> </p><p>我们可以控制全局变量以控制选项，并控制条件文本。方式与之前看到的类似。</p><p> </p><div id="gZGyI" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20the_train%20%3D%3D%3D%5Cn%5Ct%E7%81%AB%E8%BD%A6%E9%A2%A0%E7%B0%B8%E4%BA%86%E4%B8%80%E4%B8%8B%E3%80%82%20%7B%20mood%20%3E%200%3A%E6%88%91%E8%A7%89%E5%BE%97%E8%BF%98%E5%A5%BD%EF%BC%8C%E6%B2%A1%E4%BB%8B%E6%84%8F%E5%A5%87%E6%80%AA%E7%9A%84%E9%A2%A0%E7%B0%B8%7C%E8%BF%99%E8%B6%85%E5%87%BA%E4%BA%86%E6%88%91%E6%89%80%E8%83%BD%E6%89%BF%E5%8F%97%E7%9A%84%7D%E3%80%82%5Cn%5Ct*%5Ct%7B%20not%20knows_about_wager%20%7D%20%E2%80%9C%E4%BD%86%E6%98%AF%EF%BC%8C%E5%85%88%E7%94%9F%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%97%85%E8%A1%8C%EF%BC%9F%E2%80%9D%5B%5D%20%E6%88%91%E9%97%AE%E9%81%93%E3%80%82%5Cn%5Ct*%20%5Ct%7B%20knows_about_wager%7D%20%E6%88%91%E8%80%83%E8%99%91%E4%BA%86%E6%88%91%E4%BB%AC%E6%9C%89%E4%BA%9B%E7%A6%BB%E5%A5%87%E7%9A%84%E5%86%92%E9%99%A9%5B%5D%E3%80%82%E8%BF%99%E5%8F%AF%E8%83%BD%E5%90%97%EF%BC%9F%22%2C%22id%22%3A%22gZGyI%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== the_train ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    火车颠簸了一下。 { mood &gt; 0:我觉得还好，没介意奇怪的颠簸|这超出了我所能承受的}。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   { not knows_about_wager } “但是，先生，我们为什么要旅行？”[] 我问道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   { knows_about_wager} 我考虑了我们有些离奇的冒险[]。这可能吗？</span></span></pre></div></div></div><p> </p><p><span class="lake-fontsize-12" style="font-size: 12px;">变量的值可用类似于序列和条件文本的语法显示出来，这在调试时也很有用：</span></p><p> </p><div id="dbYJV" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22VAR%20friendly_name_of_player%20%3D%20%5C%22Jackie%5C%22%5CnVAR%20age%20%3D%2023%5Cn%5Cn%E6%88%91%E5%8F%AB%20Jean%20Passepartout%EF%BC%8C%E4%BD%86%E6%9C%8B%E5%8F%8B%E9%83%BD%E5%8F%AB%E6%88%91%20%7Bfriendly_name_of_player%7D%E3%80%82%20%E6%88%91%7Bage%7D%E5%B2%81%E4%BA%86%E3%80%82%22%2C%22id%22%3A%22dbYJV%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">VAR friendly_name_of_player = "Jackie"
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">VAR age = 23
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">我叫 Jean Passepartout，但朋友都叫我 {friendly_name_of_player}。 我{age}岁了。</span></span></pre></div></div></div><p> </p><p>你可能注意到，上面我们将变量称为能够包含“内容”而非“字符串”。这是有意的，因为在 INK 中定义的字符串能包含 INK ，尽管它始终会计算为字符串（很赞）。</p><p> </p><div id="fveFA" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22VAR%20a_colour%20%3D%20%5C%22%5C%22%5Cn%5Cn~%20a_colour%20%3D%20%5C%22%7B~%E7%BA%A2%E8%89%B2%7C%E8%93%9D%E8%89%B2%7C%E7%BB%BF%E8%89%B2%7C%E9%BB%84%E8%89%B2%7D%5C%22%20%5Cn%5Cn%7Ba_colour%7D%20%22%2C%22id%22%3A%22fveFA%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">VAR a_colour = ""
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">~ a_colour = "{~红色|蓝色|绿色|黄色}" 
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">{a_colour} </span></span></pre></div></div></div><p> </p><p>输出“红色，蓝色，绿色或黄色”中的一种颜色。注意，一旦输出了这样的内容，其值就是“确定的”。（量子状态崩溃。）因此，下面内容不会产生有趣的效果。（如果你希望这样做，请使用可变文本！）</p><p> </p><div id="JYyBF" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%91%86%E5%AD%90%E6%92%9E%E5%88%B0%E4%BA%86%E4%BD%A0%EF%BC%8C%E4%BD%A0%E7%9C%BC%E5%86%92%E9%87%91%E6%98%9F%EF%BC%8C%20%7Ba_colour%7D%E5%92%8C%7Ba_colour%7D%E9%97%AA%E7%83%81%E3%80%82%22%2C%22id%22%3A%22JYyBF%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">呆子撞到了你，你眼冒金星， {a_colour}和{a_colour}闪烁。</span></span></pre></div></div></div><p> </p><figure class="image lake-drag-image"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F262531%2F1574253169542-a6dd40b9-9eb0-4009-9398-37531144947c.png%22%2C%22originWidth%22%3A1505%2C%22originHeight%22%3A142%2C%22name%22%3A%22image.png%22%2C%22size%22%3A13666%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A752.5%2C%22height%22%3A71%7D"><img title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574253169542-a6dd40b9-9eb0-4009-9398-37531144947c.png" data-is-external-image="true" alt="image.png" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574253169542-a6dd40b9-9eb0-4009-9398-37531144947c.png"></span></figure><p></p><p> </p><p>这也是为什么 <code>VAR a_colour = "{~red|blue|green|yellow}"</code> 是不推荐的，它会影响到你的整个游戏。</p><p> </p><h2 id="9NAjD">3.2 逻辑运算 logic</h2><p>显然，我们的全局变量并非为常量，因此我们需要一种语法来改变它们。</p><p>默认情况下，INK 中的任何文本都直接显示到屏幕上。因此我们用 <code>~</code> 来标记表示某行是在进行数值工作。</p><p> </p><p><span class="lake-fontsize-12" style="font-size: 12px;">以下均是为变量分配值：</span></p><p><span class="lake-fontsize-12" style="font-size: 12px;"> </span></p><div id="EmPpC" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20set_some_variables%20%3D%3D%3D%5Cn%5Ct~%20knows_about_wager%20%3D%20true%5Ct%5Cn%5Ct~%20x%20%3D%20(x%20*%20x)%20-%20(y%20*%20y)%20%2B%20c%5Cn%5Ct~%20y%20%3D%202%20*%20x%20*%20y%22%2C%22id%22%3A%22EmPpC%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== set_some_variables ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ knows_about_wager = true  
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ x = (x * x) - (y * y) + c
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ y = 2 * x * y</span></span></pre></div></div></div><p> </p><p>以下是测试用的条件：</p><p> </p><div id="o7BB1" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20x%20%3D%3D%201.2%20%7D%5Cn%7B%20x%20%2F%202%20%3E%204%20%7D%5Cn%7B%20y%20-%201%20%3C%3D%20x%20*%20x%20%7D%22%2C%22id%22%3A%22o7BB1%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ x == 1.2 }
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ x / 2 &gt; 4 }
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ y - 1 &lt;= x * x }</span></span></pre></div></div></div><p> </p><p>INK 支持数学四则运算（<code>+</code>，<code>-</code>，<code>*</code>和<code>/</code>），以及 <span class="lake-fontsize-11" style="font-size: 11px;">%</span> （或 <code>mod</code> ）进行求余。还支持 <code>POW</code> （幂）运算：</p><p> </p><div id="CWDq0" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7BPOW(3%2C%202)%7D%20is%209.%20%5Cn%7BPOW(16%2C%200.5)%7D%20is%204.%20%22%2C%22id%22%3A%22CWDq0%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{POW(3, 2)} is 9. 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{POW(16, 0.5)} is 4. </span></span></pre></div></div></div><p> </p><p>还可以用 <code>RANDOM</code> 函数来生成随机整数。RANDOM 就像掷骰子，因此最小值和最大值都包括在内。（ <code>temp</code> 为<a href="#A1UDf">临时变量</a>）</p><p> </p><div id="knr4f" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22~%20temp%20dice_roll%20%3D%20RANDOM(1%2C%206)%20%5Cn~%20temp%20lazy_grading_for_test_paper%20%3D%20RANDOM(30%2C%2075)%20%20%5Cn~%20temp%20number_of_heads_the_serpent_has%20%3D%20RANDOM(3%2C%208)%22%2C%22id%22%3A%22knr4f%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">~ temp dice_roll = RANDOM(1, 6) 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">~ temp lazy_grading_for_test_paper = RANDOM(30, 75)  
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">~ temp number_of_heads_the_serpent_has = RANDOM(3, 8)</span></span></pre></div></div></div><p> </p><p>可用上文的 <a href="#P9O3i">SEED_RANDOM()</a> 进行测试。</p><p> </p><p>INK 作为文字游戏引擎，奇怪的是并没有那么多字符串查询（string queries）方式。这有三种基本查询，相等，不相等和子字符串。以下全部返回 true：</p><p> </p><div id="FASjE" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20%5C%22Yes%2C%20please.%5C%22%20%3D%3D%20%5C%22Yes%2C%20please.%5C%22%20%7D%5Cn%7B%20%5C%22No%2C%20thank%20you.%5C%22%20!%3D%20%5C%22Yes%2C%20please.%5C%22%20%7D%5Cn%7B%20%5C%22Yes%2C%20please%5C%22%20%3F%20%5C%22ease%5C%22%20%7D%22%2C%22id%22%3A%22FASjE%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ "Yes, please." == "Yes, please." }
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ "No, thank you." != "Yes, please." }
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ "Yes, please" ? "ease" }</span></span></pre></div></div></div><p> </p><h2 id="lrtZc">3.3 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#3-conditional-blocks-ifelse" target="_blank" rel="noopener noreferrer">条件块</a> if/else</h2><p>我们已经看到了用于控制选项和故事内容的条件内容，而 <code>ink</code> 还提供了与常规 <code>if/else - if/else</code> 结构等效的功能。</p><p> </p><p>单纯使用 <code>if</code> —— 简单而有效的判断：</p><p><code>if</code> 语法的判断条件，是从开始到现在为止产生的条件线索，而 <code>{</code>... <code>}</code> 语法表示正在测试某些内容。</p><p> </p><div id="3As7x" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20x%20%3E%200%3A%5Cn%5Ct~%20y%20%3D%20x%20-1%5Cn%7D%22%2C%22id%22%3A%223As7x%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ x &gt; 0:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ y = x -1
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><p>或者加上其他条件 <code>else</code> :</p><p> </p><div id="IJLuF" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20x%20%3E%200%3A%5Cn%5Ct~%20y%20%3D%20x%20-%201%5Cn-%20else%3A%5Cn%5Ct~%20y%20%3D%20x%20%2B%201%5Cn%7D%22%2C%22id%22%3A%22IJLuF%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ x &gt; 0:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ y = x - 1
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ y = x + 1
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><p>扩展 <code>if/else - if/else</code> 条件块：</p><p>上面的语法也可更改形式为另一种结构方式，类似于编程语言中的 <code>switch</code> 语句格式。</p><p> </p><div id="kEGMb" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20%5Cn%5Ct-%20x%20%3E%200%3A%5Cn%5Ct%5Ct~%20y%20%3D%20x%20-%201%5Cn%5Ct-%20else%3A%5Cn%5Ct%5Ct~%20y%20%3D%20x%20%2B%201%5Cn%7D%22%2C%22id%22%3A%22kEGMb%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - x &gt; 0:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        ~ y = x - 1
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        ~ y = x + 1
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><p>在此格式基础之上进一步拓展，我们还可以实现 <code>else-if</code> 形式的条件判断：</p><p> </p><div id="tTKJY" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20%5Cn%5Ct-%20x%20%3D%3D%200%3A%5Cn%20%20%5Ct~%20y%20%3D%200%5Cn%5Ct-%20x%20%3E%200%3A%5Cn%5Ct%5Ct~%20y%20%3D%20x%20-%201%5Cn%5Ct-%20else%3A%5Cn%5Ct%5Ct~%20y%20%3D%20x%20%2B%201%5Cn%7D%22%2C%22id%22%3A%22tTKJY%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - x == 0:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ y = 0
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - x &gt; 0:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        ~ y = x - 1
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        ~ y = x + 1
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><p><span class="lake-fontsize-11" style="font-size: 11px;">（请注意，与其他所有内容一样，空格仅出于</span><span class="lake-fontsize-11" style="font-size: 11px;">可读性考虑，没有语法含义。）</span></p><p><span class="lake-fontsize-12" style="font-size: 12px;"> </span></p><p><strong>Switch Block （开关座：选择性判断语句）：</strong></p><p>实际上 ink 的确有和其他编程语言中 <code>switch</code> 类似的语句。</p><p> </p><div id="Lt6m6" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20x%3A%5Cn%5Ct-%200%3A%5Ctzero%5Cn%5Ct-%201%3A%5Ctone%5Cn%20%20-%202%3A%5Cttwo%5Cn%20%20-%20else%3A%5Ctlots%5Cn%7D%22%2C%22id%22%3A%22Lt6m6%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ x:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - 0:    zero
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - 1:    one
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">  - 2:  two
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">  - else:   lots
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><p><strong>示例：关联上下文内容</strong></p><p>请注意，这里的判断条件除了可以使用变量之外，还可以使用玩家是否经历过结点作为条件，并且这种条件使用频繁，例如要做一些与当前游戏状态相关的内容：</p><p> </p><div id="WiNjN" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20dream%20%3D%3D%3D%5Cn%5Ct%7B%5Cn%5Ct%5Ct-%20visited_snakes%20%26%26%20not%20dream_about_snakes%3A%5Cn%5Ct%5Ct%5Ct~%20fear%2B%2B%5Cn%5Ct%5Ct%5Ct-%3E%20dream_about_snakes%5Cn%5Cn%5Ct%5Ct-%20visited_poland%20%26%26%20not%20dream_about_polish_beer%3A%5Cn%5Ct%5Ct%5Ct~%20fear--%5Cn%5Ct%5Ct%5Ct-%3E%20dream_about_polish_beer%20%5Cn%5Cn%5Ct%5Ct-%20else%3A%5Cn%5Ct%5Ct%5Ct%2F%2F%20%E6%B8%85%E6%99%A8%E7%9A%84%E6%A2%A6%E5%8F%AA%E6%98%AF%E6%A2%A6%E5%A2%83%5Cn%5Ct%5Ct%5Ct-%3E%20dream_about_marmalade%5Cn%5Ct%7D%22%2C%22id%22%3A%22WiNjN%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== dream ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    {
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        - visited_snakes &amp;&amp; not dream_about_snakes:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            ~ fear++
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            -&gt; dream_about_snakes
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">        - visited_poland &amp;&amp; not dream_about_polish_beer:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            ~ fear--
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            -&gt; dream_about_polish_beer 
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">        - else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            // 清晨的梦只是梦境
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">            -&gt; dream_about_marmalade
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    }</span></span></pre></div></div></div><p> </p><p>此语法具有易于拓展的优势，优先选择使用此语法。</p><p> </p><p><strong>条件块中不仅限于逻辑运算</strong></p><p>条件块可以用于控制故事内容以及发展走向：</p><p> </p><div id="jg8ib" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%88%91%E6%9C%9B%E7%9D%80%20Fogg%20%E5%85%88%E7%94%9F%E3%80%82%5Cn%7B%20know_about_wager%3A%5Cn%5Ct%3C%3E%20%E2%80%9C%E4%BD%86%E4%BD%A0%E4%B8%80%E5%AE%9A%E4%B8%8D%E6%98%AF%E8%AE%A4%E7%9C%9F%E7%9A%84%E5%90%A7%EF%BC%9F%E2%80%9D%20%E6%88%91%E8%AF%A7%E5%BC%82%E9%81%93%E3%80%82%5Cn-%20else%3A%5Cn%5Ct%3C%3E%20%E2%80%9C%E4%BD%86%E8%BF%99%E6%AC%A1%E6%97%85%E8%A1%8C%E4%B8%80%E5%AE%9A%E6%98%AF%E6%9C%89%E4%B8%80%E4%B8%AA%E5%8E%9F%E5%9B%A0%EF%BC%8C%E2%80%9D%E6%88%91%E8%AF%B4%E3%80%82%5Cn%7D%5Cn%E4%BB%96%E4%BB%80%E4%B9%88%E4%B9%9F%E6%B2%A1%E6%9C%89%E5%9B%9E%E7%AD%94%EF%BC%8C%E5%8F%AA%E6%98%AF%E5%83%8F%E6%98%86%E8%99%AB%E5%AD%A6%E5%AE%B6%E7%A0%94%E7%A9%B6%E4%BB%96%E6%9C%80%E6%96%B0%E7%9A%84%E5%8F%91%E7%8E%B0%E9%82%A3%E6%A0%B7%EF%BC%8C%E4%B8%80%E4%B8%9D%E4%B8%8D%E8%8B%9F%E5%9C%B0%E7%A0%94%E7%A9%B6%E4%BB%96%E7%9A%84%E6%8A%A5%E7%BA%B8%E3%80%82%22%2C%22id%22%3A%22jg8ib%22%2C%22height%22%3A161.4%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">我望着 Fogg 先生。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ know_about_wager:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    &lt;&gt; “但你一定不是认真的吧？” 我诧异道。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    &lt;&gt; “但这次旅行一定是有一个原因，”我说。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">他什么也没有回答，只是像昆虫学家研究他最新的发现那样，一丝不苟地研究他的报纸。</span></span></pre></div></div></div><p> </p><p>你甚至可以将选项放在条件块中：</p><p> </p><div id="JEdC7" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20door_open%3A%5Cn%5Ct*%20%5Ct%E6%88%91%E5%A4%A7%E6%AD%A5%E8%B5%B0%E5%87%BA%E8%BD%A6%E5%8E%A2%20%5B%5D%20%E5%B9%B6%E4%B8%94%E6%88%91%E4%BB%BF%E4%BD%9B%E5%90%AC%E8%A7%81%E6%88%91%E7%9A%84%E4%B8%BB%E4%BA%BA%E5%9C%A8%E4%BD%8E%E5%A3%B0%E5%9C%B0%E8%87%AA%E8%A8%80%E8%87%AA%E8%AF%AD%E3%80%82%20%5Ct%5Ct%5Ct-%3E%20go_outside%20%5Cn-%20else%3A%5Cn%5Ct*%5Ct%5Ct%E6%88%91%E8%AF%B7%E6%B1%82%E7%A6%BB%E5%BC%80%20%5B%5D%20%E5%B9%B6%E4%B8%94%20Fogg%20%E5%85%88%E7%94%9F%E6%98%BE%E5%BE%97%E5%BE%88%E6%83%8A%E5%A5%87%E3%80%82%20%5Ct-%3E%20open_door%20%5Cn%5Ct*%20%5Ct%E6%88%91%E7%AB%99%E8%B5%B7%E6%9D%A5%E6%89%93%E5%BC%80%E4%BA%86%E9%97%A8%20%5B%5D%20%E3%80%82Fogg%20%E5%85%88%E7%94%9F%E4%BC%BC%E4%B9%8E%E5%AF%B9%E8%BF%99%E7%A7%8D%E5%B0%8F%E5%B0%8F%E7%9A%84%E5%8F%8D%E6%8A%97%E5%B9%B6%E6%B2%A1%E6%9C%89%E6%84%9F%E5%88%B0%E4%B8%8D%E5%AE%89%E3%80%82%20-%3E%20open_door%5Cn%7D%22%2C%22id%22%3A%22JEdC7%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ door_open:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   我大步走出车厢 [] 并且我仿佛听见我的主人在低声地自言自语。             -&gt; go_outside 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *       我请求离开 [] 并且 Fogg 先生显得很惊奇。   -&gt; open_door 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    *   我站起来打开了门 [] 。Fogg 先生似乎对这种小小的反抗并没有感到不安。 -&gt; open_door
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><p>但是请注意，上面的示例中没有出现编织语法和嵌套语法不是偶然：为了避免嵌套带来的内容混淆，不允许在条件块中加入 <code>gathers</code> 收束点。</p><p> </p><p><strong>实现多种特殊功能的多行块 Multiline blocks</strong></p><p>它们是另一种特殊的代码块，可以分别实现不同的功能：</p><p> </p><div id="x2yXp" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%2F%2F%20%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%EF%BC%9A%E6%A0%B9%E6%8D%AE%E6%AF%8F%E6%AC%A1%E7%9A%84%E8%B7%B3%E8%BD%AC%E4%BE%9D%E6%AC%A1%E6%89%A7%E8%A1%8C%EF%BC%8C%E5%85%A8%E9%83%A8%E6%89%A7%E8%A1%8C%E5%90%8E%E6%8C%81%E7%BB%AD%E6%89%A7%E8%A1%8C%E6%98%BE%E7%A4%BA%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%5Cn%7B%20stopping%3A%5Cn%5Ct-%20%20%20%E6%88%91%E8%BF%9B%E5%85%A5%E4%BA%86%E8%B5%8C%E5%9C%BA%E3%80%82%5Cn%5Ct-%20%20%20%E6%88%91%E5%8F%88%E4%B8%80%E6%AC%A1%E8%BF%9B%E5%85%A5%E4%BA%86%E8%B5%8C%E5%9C%BA%E3%80%82%5Cn%5Ct-%20%20%20%E6%88%91%E5%8F%88%E4%B8%80%E6%AC%A1%E8%B5%B0%E4%BA%86%E8%BF%9B%E5%8E%BB%E3%80%82%5Cn%7D%5Cn%5Cn%2F%2F%20%E9%9A%8F%E6%9C%BA%E6%B4%97%E7%89%8C%EF%BC%9A%E9%9A%8F%E6%9C%BA%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8C%E5%85%B6%E4%B8%AD%E4%B8%80%E8%A1%8C%5Cn%E5%9C%A8%E6%A1%8C%E5%AD%90%E4%B8%8A%EF%BC%8C%E6%88%91%E7%94%BB%E4%BA%86%E4%B8%80%E5%BC%A0%E5%8D%A1%E7%89%87%E3%80%82%20%3C%3E%5Cn%7B%20shuffle%3A%5Cn%5Ct-%20%5Ct%E7%BA%A2%E5%BF%83%E7%8E%8B%E7%89%8C%E3%80%82%5Cn%5Ct-%20%5Ct%E9%BB%91%E6%A1%83%E7%8E%8B%E7%89%8C%E3%80%82%5Cn%5Ct-%20%5Ct%E6%96%B9%E5%9D%972%E3%80%82%5Cn%5Ct%5Ct%E2%80%9C%E4%BD%A0%E8%BF%99%E6%AC%A1%E8%BE%93%E4%BA%86%EF%BC%81%E2%80%9D%E8%B5%8C%E5%9C%BA%E5%BA%84%E5%AE%B6%E6%AC%A2%E5%8F%AB%E7%9D%80%E3%80%82%5Cn%7D%5Cn%5Cn%2F%2F%20%E5%BE%AA%E7%8E%AF%E6%89%A7%E8%A1%8C%EF%BC%9A%E9%A1%BA%E5%BA%8F%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8C%EF%BC%8C%E5%B9%B6%E5%BE%AA%E7%8E%AF%E5%A6%82%E6%AD%A4%5Cn%7B%20cycle%3A%5Cn%5Ct-%20%20%20%E6%88%91%E5%B1%8F%E4%BD%8F%E5%91%BC%E5%90%B8%E3%80%82%5Cn%5Ct-%20%20%20%E6%88%91%E4%B8%8D%E8%80%90%E7%83%A6%E5%9C%B0%E7%AD%89%E7%9D%80%E3%80%82%5Cn%5Ct-%20%20%20%E6%88%91%E5%81%9C%E9%A1%BF%E4%BA%86%E4%B8%80%E4%B8%8B%E3%80%82%5Cn%7D%5Cn%5Cn%2F%2F%20%E4%B8%80%E6%AC%A1%E6%89%A7%E8%A1%8C%EF%BC%9A%E9%A1%BA%E5%BA%8F%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%AF%8F%E4%B8%AA%E5%88%86%E6%94%AF%E5%8F%AA%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%EF%BC%8C%E5%85%A8%E9%83%A8%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8C%E5%90%8E%E4%B8%8D%E5%86%8D%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8C%5Cn%7B%20once%3A%5Cn%5Ct-%20%20%20%E6%88%91%E7%9A%84%E8%BF%90%E6%B0%94%E5%A5%BD%E5%90%97%EF%BC%9F%5Cn%5Ct-%20%20%20%E6%88%91%E8%83%BD%E8%B5%A2%E5%90%97%EF%BC%9F%5Cn%7D%22%2C%22id%22%3A%22x2yXp%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">// 顺序执行：根据每次的跳转依次执行，全部执行后持续执行显示最后一行
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ stopping:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我进入了赌场。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我又一次进入了赌场。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我又一次走了进去。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">// 随机洗牌：随机显示执行其中一行
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">在桌子上，我画了一张卡片。 &lt;&gt;
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ shuffle:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   红心王牌。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   黑桃王牌。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   方块2。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        “你这次输了！”赌场庄家欢叫着。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">// 循环执行：顺序显示执行，并循环如此
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ cycle:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我屏住呼吸。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我不耐烦地等着。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我停顿了一下。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">// 一次执行：顺序显示执行，每个分支只显示执行一次，全部显示执行后不再显示执行
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ once:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我的运气好吗？
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   我能赢吗？
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><figure class="image lake-drag-image"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fgif%2F447250%2F1575183925923-4d586d7c-a2e8-438f-af60-02521431da76.gif%22%2C%22originWidth%22%3A1186%2C%22originHeight%22%3A694%2C%22name%22%3A%22Multiline_blocks.gif%22%2C%22size%22%3A1130892%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A1186%2C%22height%22%3A694%7D"><img title="Multiline_blocks.gif" src="https://cdn.nlark.com/yuque/0/2019/gif/447250/1575183925923-4d586d7c-a2e8-438f-af60-02521431da76.gif" data-is-external-image="true" alt="Multiline_blocks.gif" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/gif/447250/1575183925923-4d586d7c-a2e8-438f-af60-02521431da76.gif"></span></figure><p></p><p> </p><p><strong>高级：修改的随机洗牌</strong></p><p>上面的随机洗牌，实际上是 <code>shuffle cycle</code> 循环随机洗牌；它每次随机选择内容，显示内容，然后重新随机显示内容，显示内容。</p><p>随机洗牌还有两种方式：</p><p><code>shuffle once</code> 随机显示执行内容，只显示执行一次，之后不会再执行</p><p> </p><div id="TJyDM" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20shuffle%20once%3A%20%5Cn%5Ct-%5Ct%E5%A4%AA%E9%98%B3%E5%BE%88%E6%99%92%E3%80%82%20%5Cn%5Ct-%20%E5%A4%A9%E6%B0%94%E5%BE%88%E7%83%AD%E3%80%82%5Cn%7D%22%2C%22id%22%3A%22TJyDM%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ shuffle once: 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   太阳很晒。 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - 天气很热。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><p><code>shuffle stopping</code> 随机显示执行内容（最后一条除外），当其他项全部随机执行完毕后，将一直保持在最后一条</p><p> </p><div id="mxvsp" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%20shuffle%20stopping%3A%5Cn%5Ct-%20%E4%B8%80%E8%BE%86%E9%93%B6%E8%89%B2%E5%AE%9D%E9%A9%AC%E8%BD%A6%E5%91%BC%E5%95%B8%E8%80%8C%E8%BF%87%E3%80%82%5Cn%5Ct-%5Ct%E4%B8%80%E8%BE%86%E4%BA%AE%E9%BB%84%E8%89%B2%E7%9A%84%E9%87%8E%E9%A9%AC%E8%BD%A6%E5%9C%A8%E8%BD%AC%E5%BC%AF%E3%80%82%5Cn%5Ct-%20%E8%BF%99%E9%87%8C%E6%9C%89%E5%BE%88%E5%A4%9A%E8%BD%A6%E3%80%82%5Cn%7D%22%2C%22id%22%3A%22mxvsp%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">{ shuffle stopping:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - 一辆银色宝马车呼啸而过。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   一辆亮黄色的野马车在转弯。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - 这里有很多车。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">}</span></span></pre></div></div></div><p> </p><h2 id="A1UDf">3.4 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#4-temporary-variables" target="_blank" rel="noopener noreferrer">临时变量</a> Temporary Variables</h2><p><strong>临时变量用于临时计算</strong></p><p>有时，全局变量无法满足我们的临时需求，这时候 ink 为我们提供了临时变量 <code>Temporary Variables</code> 。</p><p> </p><div id="jraqq" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20near_north_pole%20%3D%3D%3D%5Cn%5Ct~%20temp%20number_of_warm_things%20%3D%200%5Cn%5Ct%7B%20blanket%3A%5Cn%5Ct%5Ct~%20number_of_warm_things%2B%2B%5Cn%5Ct%7D%5Cn%5Ct%7B%20ear_muffs%3A%5Cn%5Ct%5Ct~%20number_of_warm_things%2B%2B%5Cn%5Ct%7D%5Cn%5Ct%7B%20gloves%3A%5Cn%5Ct%5Ct~%20number_of_warm_things%2B%2B%5Cn%5Ct%7D%5Cn%5Ct%7B%20number_of_warm_things%20%3E%202%3A%5Cn%5Ct%5Ct%E5%B0%BD%E7%AE%A1%E4%B8%8B%E9%9B%AA%E4%BA%86%EF%BC%8C%E4%BD%86%E6%88%91%E8%BF%98%E6%98%AF%E6%84%9F%E5%88%B0%E6%97%A0%E6%AF%94%E8%88%92%E9%80%82%E3%80%82%5Cn%5Ct-%20else%3A%5Cn%5Ct%5Ct%E9%82%A3%E5%A4%A9%E6%99%9A%E4%B8%8A%E6%88%91%E6%84%9F%E8%A7%89%E6%AF%94%E4%BB%A5%E5%BE%80%E4%BB%BB%E4%BD%95%E6%97%B6%E5%80%99%E9%83%BD%E5%86%B7%E3%80%82%5Cn%5Ct%7D%22%2C%22id%22%3A%22jraqq%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== near_north_pole ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ temp number_of_warm_things = 0
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    { blanket:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        ~ number_of_warm_things++
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    }
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    { ear_muffs:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        ~ number_of_warm_things++
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    }
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    { gloves:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        ~ number_of_warm_things++
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    }
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    { number_of_warm_things &gt; 2:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        尽管下雪了，但我还是感到无比舒适。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        那天晚上我感觉比以往任何时候都冷。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    }</span></span></pre></div></div></div><p> </p><p>临时变量只在其定义的当前结点生效，离开结点后临时变量将被丢弃。</p><p> </p><p><strong>结点和针脚可以拥有参数</strong></p><p> </p><p>临时变量有一种非常实用的形式，就是作为传递给任意结点或针脚的一个参数。</p><p> </p><div id="MMFjx" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22*%5Ct%5BAccuse%20Hasting%5D%5Cn%5Ct%5Ct-%3E%20accuse(%5C%22Hastings%5C%22)%5Cn*%5Ct%5BAccuse%20Mrs%20Black%5D%5Cn%5Ct%5Ct-%3E%20accuse(%5C%22Claudia%5C%22)%5Cn*%5Ct%5BAccuse%20myself%5D%20%5Cn%5Ct%5Ct-%3E%20accuse(%5C%22myself%5C%22)%5Cn%5Ct%5Ct%5Cn%3D%3D%3D%20accuse(who)%20%3D%3D%3D%5Cn%5Ct%5C%22%E6%88%91%E6%8E%A7%E8%AF%89%20%7Bwho%7D!%5C%22%20%E6%B3%A2%E6%B4%9B%E5%AE%A3%E5%B8%83%E3%80%82%5Cn%5Ct%E2%80%9C%E7%9C%9F%E7%9A%84%E5%90%97%EF%BC%9F%E2%80%9D%20Japp%20%E5%9B%9E%E9%81%93%E3%80%82%20%E2%80%9C%7Bwho%20%3D%3D%20%5C%22myself%5C%22%3A%E4%BD%A0%E8%A6%81%E8%BF%99%E4%B9%88%E5%81%9A%EF%BC%9F%7C%7Bwho%7D%EF%BC%9F%7D%E2%80%9D%5Cn%5Ct%E2%80%9C%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E5%8F%AF%E4%BB%A5%EF%BC%9F%E2%80%9D%20%E6%B3%A2%E6%B4%9B%E5%9B%9E%E5%87%BB%E9%81%93%E3%80%82%20%22%2C%22id%22%3A%22MMFjx%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [Accuse Hasting]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; accuse("Hastings")
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [Accuse Mrs Black]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; accuse("Claudia")
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   [Accuse myself] 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; accuse("myself")
</span></span>        
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== accuse(who) ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    "我控诉 {who}!" 波洛宣布。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “真的吗？” Japp 回道。 “{who == "myself":你要这么做？|{who}？}”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “为什么不可以？” 波洛回击道。 </span></span></pre></div></div></div><p> </p><p>如果要将临时变量从一个针脚传递给另一个针脚，就要用参数。</p><p> </p><p><strong>示例：递归节点中的定义</strong></p><p>临时变量可以放心的在递归中使用（与全局变量不同，全局变量改变后递归过程中都会变为改变后的值），因此可以执行下面的内容：</p><p> </p><div id="CkaU2" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%3E%20add_one_to_one_hundred(0%2C%201)%5Cn%5Cn%3D%3D%3D%20add_one_to_one_hundred(total%2C%20x)%20%3D%3D%3D%5Cn%5Ct~%20total%20%3D%20total%20%2B%20x%5Cn%5Ct%7B%20x%20%3D%3D%20100%3A%5Cn%5Ct%5Ct-%3E%20finished(total)%5Cn%5Ct-%20else%3A%5Cn%5Ct%5Ct-%3E%20add_one_to_one_hundred(total%2C%20x%20%2B%201)%5Cn%5Ct%7D%5Ct%5Cn%5Ct%5Cn%3D%3D%3D%20finished(total)%20%3D%3D%3D%5Cn%5Ct%E2%80%9C%E7%BB%93%E6%9E%9C%E6%98%AF%20%7Btotal%7D%EF%BC%81%E2%80%9D%20%E4%BD%A0%E5%AE%A3%E5%B8%83%E3%80%82%5Cn%5Ct%E9%AB%98%E6%96%AF%E6%83%8A%E6%81%90%E5%9C%B0%E7%9B%AF%E7%9D%80%E4%BD%A0%E3%80%82%5Cn%5Ct-%3E%20END%22%2C%22id%22%3A%22CkaU2%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt; add_one_to_one_hundred(0, 1)
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== add_one_to_one_hundred(total, x) ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    ~ total = total + x
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    { x == 100:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; finished(total)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    - else:
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; add_one_to_one_hundred(total, x + 1)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    }   
</span></span>    
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== finished(total) ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    “结果是 {total}！” 你宣布。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    高斯惊恐地盯着你。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; END</span></span></pre></div></div></div><p> </p><p>实际上，这种递归节点中的定义非常实用，也因此 <code>ink</code> 中提供了一种特殊的结点，一个 <code>function</code> 。它有一定的限制，并且可以返回一个值，请参阅以下部分。</p><p> </p><p><strong>高级：将 </strong><strong><code>divert targets</code></strong><strong> （跳转目标）作为参数传递</strong></p><p>结点、针脚的地址也是一种类型的值，用 <code>-&gt;</code> 符号表示，可以传递与存储。因此以下的内容是正常的，并且非常有用：</p><p> </p><div id="7gGuS" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20sleeping_in_hut%20%3D%3D%3D%5Cn%5Ct%E4%BD%A0%E8%BA%BA%E4%B8%8B%E9%97%AD%E4%B8%8A%E4%BA%86%E7%9C%BC%E7%9D%9B%E3%80%82%5Cn%5Ct-%3E%20generic_sleep%20(-%3E%20waking_in_the_hut)%5Cn%5Cn%3D%3D%3D%5Ct%20generic_sleep%20(-%3E%20waking)%5Cn%5Ct%E4%BD%A0%E5%81%B6%E5%B0%94%E4%BC%9A%E5%81%9A%E6%A2%A6%E4%B9%8B%E7%B1%BB%E7%9A%84%E3%80%82%5Cn%5Ct-%3E%20waking%5Cn%5Cn%3D%3D%3D%20waking_in_the_hut%5Cn%5Ct%E4%BD%A0%E9%87%8D%E6%96%B0%E7%AB%99%E8%B5%B7%E6%9D%A5%EF%BC%8C%E5%87%86%E5%A4%87%E7%BB%A7%E7%BB%AD%E4%BD%A0%E7%9A%84%E6%97%85%E7%A8%8B%E3%80%82%22%2C%22id%22%3A%227gGuS%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== sleeping_in_hut ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你躺下闭上了眼睛。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; generic_sleep (-&gt; waking_in_the_hut)
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">===  generic_sleep (-&gt; waking)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你偶尔会做梦之类的。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; waking
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== waking_in_the_hut
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你重新站起来，准备继续你的旅程。</span></span></pre></div></div></div><p> </p><p>要注意的是，在 <code>generic_sleep</code> 的定义中，是有 <code>-&gt;</code> 符号存在的。因为这里是作为一个参数值存在，如果不加 <code>-&gt;</code> 符号，就会变成下面这样：</p><p> </p><div id="A8saQ" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20sleeping_in_hut%20%3D%3D%3D%5Cn%5Ct%E4%BD%A0%E8%BA%BA%E4%B8%8B%E9%97%AD%E4%B8%8A%E4%BA%86%E7%9C%BC%E7%9D%9B%E3%80%82%5Cn%5Ct-%3E%20generic_sleep%20(waking_in_the_hut)%22%2C%22id%22%3A%22A8saQ%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== sleeping_in_hut ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你躺下闭上了眼睛。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; generic_sleep (waking_in_the_hut)</span></span></pre></div></div></div><p> </p><p>这种情况下， <code>ink</code> 会将 <code>waking_in_the_hut</code> 的结点数字传递给 <code>sleeping</code> 结点，并且尝试跳转到此结点。</p><p> </p><h2 id="Sq6x3">3.5 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#5-functions" target="_blank" rel="noopener noreferrer">函数</a> Functions</h2><h2 id="KQYr4">3.6<a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#4-temporary-variables" target="_blank" rel="noopener noreferrer"> 常数</a> Constants</h2><p> </p><div id="mSNNL" data-card-type="block" data-lake-card="hr" data-card-value="data:%7B%22id%22%3A%22mSNNL%22%7D"><hr></div><h2 id="4J3zl">4.1 <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#1-tunnels" target="_blank" rel="noopener noreferrer">隧道</a>（？）tunnels</h2><blockquote><p>狼也不知道这里 <code>tunnels</code> 翻译成什么更恰当。无端的想起马里奥中可以往返隐藏区域的“管道”。但最后决定还是直译成了“隧道”。</p><p> </p><figure class="image lake-drag-image"><span data-card-type="inline" data-lake-card="image" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F262531%2F1574257344388-5e62b910-d25d-4320-9e05-0efcb7af7aed.png%22%2C%22originWidth%22%3A523%2C%22originHeight%22%3A230%2C%22name%22%3A%22image.png%22%2C%22size%22%3A116459%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%22%2C%22width%22%3A261.5%2C%22height%22%3A115%7D"><img title="image.png" src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574257344388-5e62b910-d25d-4320-9e05-0efcb7af7aed.png" data-is-external-image="true" alt="image.png" data-role="image" data-raw-src="https://cdn.nlark.com/yuque/0/2019/png/262531/1574257344388-5e62b910-d25d-4320-9e05-0efcb7af7aed.png"></span></figure><p></p></blockquote><p> </p><p>INK 故事的默认结构是“扁平”的树状结构，分支又重新收束回一起，也许还有循环，但故事始终位于“某个位置”。</p><p> </p><p>但是这种扁平结构会使某些事情变得困难：想象一个游戏，可能发生以下的相互作用：</p><p> </p><div id="Osn87" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20crossing_the_date_line%20%3D%3D%3D%5Cn*%5Ct%E2%80%9C%E5%85%88%E7%94%9F%EF%BC%81%E2%80%9D%5B%5D%20%E6%88%91%E7%AA%81%E7%84%B6%E6%84%9F%E5%88%B0%E9%9C%87%E6%83%8A%E3%80%82%5C%22%E6%88%91%E6%89%8D%E6%84%8F%E8%AF%86%E5%88%B0%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B7%B2%E7%BB%8F%E7%A9%BF%E8%BF%87%E4%BA%86%E5%9B%BD%E9%99%85%E6%97%A5%E6%9C%9F%E5%8F%98%E6%9B%B4%E7%BA%BF%EF%BC%81%5C%22%5Cn-%5CtFogg%20%E5%85%88%E7%94%9F%E8%BD%BB%E8%BD%BB%E6%8A%AC%E8%B5%B7%E4%BA%86%E7%9C%89%E6%AF%9B%E3%80%82%E2%80%9C%E6%88%91%E5%B7%B2%E7%BB%8F%E8%B0%83%E6%95%B4%E8%BF%87%E4%BA%86%E3%80%82%E2%80%9D%5Cn*%5Ct%E6%88%91%E6%93%A6%E4%BA%86%E6%93%A6%E9%A2%9D%E5%A4%B4%E4%B8%8A%E7%9A%84%E6%B1%97%E6%B0%B4%5B%5D%E3%80%82%E6%9D%BE%E4%BA%86%E5%8F%A3%E6%B0%94%EF%BC%81%5Cn*%20%E6%88%91%E8%BD%BB%E8%BD%BB%E7%9A%84%E7%82%B9%E5%A4%B4%5B%5D%E3%80%82%E4%BB%96%E5%BD%93%E7%84%B6%E4%BC%9A%E5%81%9A%E7%9A%84%E3%80%82%5Cn*%20%E6%88%91%E5%9C%A8%E5%BF%83%E9%87%8C%E6%8A%B1%E6%80%A8%5B%5D%E3%80%82%20%E6%88%91%E5%8F%88%E8%A2%AB%E5%B0%8F%E7%9C%8B%E4%BA%86%E4%B8%80%E6%AC%A1%E3%80%82%22%2C%22id%22%3A%22Osn87%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== crossing_the_date_line ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   “先生！”[] 我突然感到震惊。"我才意识到，我们已经穿过了国际日期变更线！"
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   Fogg 先生轻轻抬起了眉毛。“我已经调整过了。”
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">*   我擦了擦额头上的汗水[]。松了口气！
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">* 我轻轻的点头[]。他当然会做的。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">* 我在心里抱怨[]。 我又被小看了一次。</span></span></pre></div></div></div><p> </p><p>...但它可能发生在故事中的几个不同地方。我不想为不同的地方写相同内容，但是当内容完成后，它还需要知道返回到哪里。我们可以使用参数来做到这一点：</p><p> </p><div id="ySbVC" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20crossing_the_date_line(-%3E%20return_to)%20%3D%3D%3D%5Cn...%5Cn-%5Ct%5Ct-%3E%20return_to%20%5Cn%5Cn...%5Cn%5Cn%3D%3D%3D%20outside_honolulu%20%3D%3D%3D%5Cn%E6%88%91%E4%BB%AC%E5%88%B0%E4%BA%86Honolulu%20%E6%9C%80%E5%A4%A7%E7%9A%84%E5%B2%9B%E3%80%82%5Cn-%20(postscript)%20%5Cn%5Ct%5Ct-%3E%20crossing_the_date_line(-%3E%20done)%5Cn-%20(done)%5Cn%5Ct%5Ct-%3E%20END%20%5Cn%5Cn...%5Cn%5Cn%3D%3D%3D%20outside_pitcairn_island%20%3D%3D%3D%5Cn%E8%88%B9%E5%9C%A8%E6%B0%B4%E4%B8%8A%E9%A9%B6%E5%90%91%E5%B0%8F%E5%B2%9B%E3%80%82%5Cn-%20(postscript)%20%5Cn%5Ct%5Ct-%3E%20crossing_the_date_line(-%3E%20done)%5Cn-%20(done)%5Cn%5Ct%5Ct-%3E%20END%20%22%2C%22id%22%3A%22ySbVC%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== crossing_the_date_line(-&gt; return_to) ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">...
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-       -&gt; return_to 
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">...
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== outside_honolulu ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">我们到了Honolulu 最大的岛。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (postscript) 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; crossing_the_date_line(-&gt; done)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (done)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; END 
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">...
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== outside_pitcairn_island ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">船在水上驶向小岛。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (postscript) 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; crossing_the_date_line(-&gt; done)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">- (done)
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; END </span></span></pre></div></div></div><p> </p><p>这两个位置都调用并执行相同的故事片段，一旦完成，它们就会回到下一步要去的地方。</p><p> </p><p>但如果这个“故事的部分”更复杂怎么办？如果跨越多个结点怎么办？使用上面的方法，我们必须不断地将“ return-to”参数从一个结点传递到另一个结点，以确保我们始终知道该返回的位置。</p><p>因此，INK 把跳转和新功能结合到起来加语言中，其功能类似于子程序，称为"隧道"（tunnels）。</p><p> </p><p>隧道的语法看起来很像跳转，末尾还有另一个跳转：</p><p> </p><div id="7xzI6" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22-%3E%20crossing_the_date_line%20-%3E%22%2C%22id%22%3A%227xzI6%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt; crossing_the_date_line -&gt;</span></span></pre></div></div></div><p> </p><p>这意味着运行一个“crossing_the_date_line 的故事”，然后从这继续。</p><p>在隧道内部，语法展示进行了简化：用 <code>-&gt;-&gt;</code> 语句结束隧道，实质上意味着“继续”。</p><p> </p><div id="B9PbI" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20crossing_the_date_line%20%3D%3D%3D%20%5Cn%2F%2F%20%E8%BF%99%E9%87%8C%E6%98%AF%E9%9A%A7%E9%81%93%EF%BC%81%5Cn...%5Cn-%20%5Ct-%3E-%3E%22%2C%22id%22%3A%22B9PbI%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== crossing_the_date_line === 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">// 这里是隧道！
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">...
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-   -&gt;-&gt;</span></span></pre></div></div></div><p> </p><p>注意，隧道结点和普通的结点不同，编译器将不会检查隧道是否真的以“-&gt;-&gt;”语句结尾，除非在运行时。因此，您需要仔检查进出隧道的跳转。</p><p> </p><p>隧道可串在一起，也可在普通跳转上：</p><p> </p><div id="rJE1V" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22...%20%5Cn%2F%2F%20%E8%BF%99%E9%87%8C%E8%BF%90%E8%A1%8C%E4%BA%86%E9%9A%A7%E9%81%93%EF%BC%8C%E7%84%B6%E5%90%8E%E8%B7%B3%E8%BD%AC%E5%88%B0%20done%5Cn-%3E%20crossing_the_date_line%20-%3E%20done%5Cn...%5Cn%5Cn...%20%5Cn%2F%2F%E8%BF%99%E9%87%8C%E8%BF%90%E8%A1%8C%E4%BA%86%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%9A%A7%E9%81%93%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E9%9A%A7%E9%81%93%EF%BC%8C%E7%84%B6%E5%90%8E%E8%B7%B3%E8%BD%AC%E5%88%B0%20done%5Cn-%3E%20crossing_the_date_line%20-%3E%20check_foggs_health%20-%3E%20done%5Cn...%22%2C%22id%22%3A%22rJE1V%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">... 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">// 这里运行了隧道，然后跳转到 done
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt; crossing_the_date_line -&gt; done
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">...
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">... 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">//这里运行了第一个隧道，第二个隧道，然后跳转到 done
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">-&gt; crossing_the_date_line -&gt; check_foggs_health -&gt; done
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">...</span></span></pre></div></div></div><p> </p><p>隧道可以嵌套，因此以下内容也行：</p><p> </p><div id="hjSeL" data-card-type="block" data-lake-card="codeblock" data-card-value="data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3D%3D%3D%20plains%20%3D%3D%3D%5Cn%3D%20night_time%20%5Cn%5Ct%E8%84%9A%E8%BE%B9%E6%98%AF%E6%B7%B1%E8%89%B2%E6%9F%94%E8%BD%AF%E7%9A%84%E8%8D%89%E4%B8%9B%E3%80%82%5Cn%5Ct%2B%5Ct%5B%E4%BC%91%E6%81%AF%5D%5Cn%5Ct%5Ct-%3E%20sleep_here%20-%3E%20wake_here%20-%3E%20day_time%5Cn%3D%20day_time%20%5Cn%5Ct%E5%88%B0%E4%BA%86%E8%AF%A5%E5%8A%A8%E8%BA%AB%E7%9A%84%E6%97%B6%E9%97%B4%E4%BA%86%E3%80%82%5Cn%5Ct%5Cn%3D%3D%3D%20wake_here%20%3D%3D%3D%5Cn%5Ct%E4%BD%A0%E9%9A%8F%E5%A4%AA%E9%98%B3%E4%B8%80%E5%90%8C%E9%86%92%E6%9D%A5%E3%80%82%5Cn%5Ct%2B%5Ct%5B%E5%90%83%E4%BA%9B%E4%B8%9C%E8%A5%BF%5D%5Cn%5Ct%5Ct-%3E%20eat_something%20-%3E%5Cn%5Ct%2B%5Ct%5B%E8%AF%A5%E5%8A%A8%E8%BA%AB%E4%BA%86%5D%5Cn%5Ct-%5Ct-%3E-%3E%5Cn%5Cn%3D%3D%3D%20sleep_here%20%3D%3D%3D%5Cn%5Ct%E4%BD%A0%E8%BA%BA%E4%B8%8B%E5%B9%B6%E9%97%AD%E4%B8%8A%E5%8F%8C%E7%9C%BC%E3%80%82%5Cn%5Ct-%3E%20monster_attacks%20-%3E%20%5Cn%5Ct%E6%8E%A5%E7%9D%80%E8%AF%A5%E7%9D%A1%E8%A7%89%E4%BA%86%E3%80%82%5Cn%5Ct-%3E%20dream%20-%3E%5Cn%5Ct-%3E-%3E%22%2C%22id%22%3A%22hjSeL%22%7D"><div class="lake-codeblock-content"><div><pre class="cm-s-default"><span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== plains ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= night_time 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    脚边是深色柔软的草丛。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    +   [休息]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; sleep_here -&gt; wake_here -&gt; day_time
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">= day_time 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    到了该动身的时间了。
</span></span>    
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== wake_here ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你随太阳一同醒来。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    +   [吃些东西]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">        -&gt; eat_something -&gt;
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    +   [该动身了]
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -   -&gt;-&gt;
</span></span>
<span class="lake-preview-line"><span class="lake-preview-codeblock-content">=== sleep_here ===
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    你躺下并闭上双眼。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; monster_attacks -&gt; 
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    接着该睡觉了。
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt; dream -&gt;
</span></span><span class="lake-preview-line"><span class="lake-preview-codeblock-content">    -&gt;-&gt;</span></span></pre></div></div></div><p> </p></div></div></div></div><footer><div class="post__footer-top"><div class="post__meta"><time datetime="2020-01-18T17:14">一月 18, 2020 </time>by <a href="https://fur2.now.sh/authors/legacy/" rel="author" title="Legacy">Legacy </a><span>Updated on: <time datetime="2020-01-18T17:14">一月 18, 2020</time></span></div><div class="post__share"><button class="post__share-button js-post__share-button" aria-label="Share"><svg><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#share"></use></svg></button><div class="post__share-popup js-post__share-popup"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffur2.now.sh%2Fgeng-duo-wen-dang%2F" class="js-share facebook" title="Share with Facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#facebook"/></svg> Facebook </a><a href="https://twitter.com/share?url=https%3A%2F%2Ffur2.now.sh%2Fgeng-duo-wen-dang%2F&amp;via=fur2-inky%E6%8C%87%E5%8D%97&amp;text=%E6%9B%B4%E5%A4%9A%E6%96%87%E6%A1%A3" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#twitter"/></svg> Twitter </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Ffur2.now.sh%2Fgeng-duo-wen-dang%2F&amp;media=undefined&amp;description=%E6%9B%B4%E5%A4%9A%E6%96%87%E6%A1%A3" class="js-share pinterest" title="Share with Pinterest" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#pinterest"/></svg> Pinterest </a><a href="https://mix.com/add?url=https%3A%2F%2Ffur2.now.sh%2Fgeng-duo-wen-dang%2F" class="js-share mix" title="Share with Mix" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#mix"/></svg> Mix </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Ffur2.now.sh%2Fgeng-duo-wen-dang%2F&amp;title=%E6%9B%B4%E5%A4%9A%E6%96%87%E6%A1%A3" class="js-share linkedin" title="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#linkedin"/></svg> LinkedIn </a><a href="https://buffer.com/add?text=%E6%9B%B4%E5%A4%9A%E6%96%87%E6%A1%A3&amp;url=https%3A%2F%2Ffur2.now.sh%2Fgeng-duo-wen-dang%2F" class="js-share buffer" title="Share with Buffer" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#buffer"/></svg> Buffer </a><a href="https://wa.me/?text=%E6%9B%B4%E5%A4%9A%E6%96%87%E6%A1%A3 https%3A%2F%2Ffur2.now.sh%2Fgeng-duo-wen-dang%2F" class="js-share whatsapp" title="Share with WhatsApp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://fur2.now.sh/assets/svg/svg-map.svg#whatsapp"/></svg> WhatsApp</a></div></div></div><div class="post__footer-bottom"><div class="post__bio"><img class="lazyload" data-src="https://fur2.now.sh/media/website/2.png" alt="Legacy"><p><a href="https://fur2.now.sh/authors/legacy/"><strong>Legacy</strong> </a>这个网页的幕后之狼，他偶尔写些故事</p></div></div><div class="post__progress" id="js-post__progress" aria-hidden="true"></div></footer></article><nav><ul class="posts-nav"><li class="posts-nav__prev"><span>Previous: </span><a href="https://fur2.now.sh/fa-bu-dao-wang-ye/" class="invert" rel="prev" title="发布到网页">发布到网页</a></li></ul></nav></div><aside class="main__left-aside"><div class="main__left-aside__inner"><h3>On this page</h3><nav class="aside-toc" id="aside-toc"></nav></div></aside></div></div><div class="main__right"><div class="main__right-inner"><nav class="navbar"><ul class="navbar__menu"><li><a href="https://fur2.now.sh/gua-he-chu-xue-zhe/" target="_self">新手入门</a></li><li><a href="https://fur2.now.sh/jin-jie-wen-dang/" target="_self">你可以的</a></li><li><a href="https://fur2.now.sh/fa-bu-dao-wang-ye/" target="_self">分享成果</a></li><li class="active"><a href="https://fur2.now.sh/geng-duo-wen-dang/" target="_self">备用文档</a></li></ul></nav><div class="footer main__right-footer"><ul class="footer__nav"><li><a href="https://gitter.im/fur2/community" class="invert">💬 聊天室</a></li></ul><div class="footer__copy">&copy; 2020 Powered by Legacy🐺 & <a href="https://getpublii.com" rel="nofollow noopener">Publii CMS</a> for Static Website.</div></div></div></div></main><footer class="footer"><div class="footer__wrap"><div class="footer__inner"><ul class="footer__nav"><li><a href="https://gitter.im/fur2/community" class="invert">💬 聊天室</a></li></ul><div class="footer__copy">&copy; 2020 Powered by Legacy🐺 & <a href="https://getpublii.com" rel="nofollow noopener">Publii CMS</a> for Static Website.</div></div></div></footer><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',        
        submenuWidth: 300,        
        mobileMenuExpandableSubmenus: true,
        isHoverMenu: false,
        ariaButtonAttribute: 'aria-expanded',
   };</script><script src="https://fur2.now.sh/assets/js/html-contents.min.js?v=169077c370ab8ca62b029845f80f7fd5" defer="defer"></script><script>document.addEventListener("DOMContentLoaded", function(event) {
            htmlContents('#aside-toc', {
                area: '.post__entry',
                top: 2,
                bottom: 3,
                listType: 'o',
                filter: function(arr) {
                    return !arr.matches('.noOutline')
                },
                addIds: true,
                addLinks: true
            });

            setTimeout(function() {
                handleActiveClass('#aside-toc');
            }, 0);
        })</script><script defer="defer" src="https://fur2.now.sh/assets/js/scripts.min.js?v=14129b7e438f986864eb56856537aebf"></script><script defer="defer" src="https://fur2.now.sh/assets/js/prism.js?v=6239ca4269ba0b11f919c3f7ec31aa99"></script><script defer="defer" src="https://fur2.now.sh/assets/js/prism-line-numbers.min.js?v=13275d3ac10d7028cf6a6f5da276f68c"></script><script defer="defer" src="https://fur2.now.sh/assets/js/prism-copy-to-clipboard.min.js?v=fabfc3fd9af83cda5208ba2e9f9ed238"></script><script src="https://fur2.now.sh/assets/js/docsearch.min.js?v=9db7c9eaa8e736ce16840e5bbc02047b"></script><script>docsearch({
         apiKey: 'd499d1fe16081a2e13411678d24b56df',
         indexName: 'fur2',
         inputSelector: '#docsearch-input',
         debug: false
   });</script><script defer="defer" src="https://fur2.now.sh/assets/js/quicklink.umd.js?v=61daff262ce6be0813e6b1b0341274d4"></script><script>window.addEventListener('load', () =>{
         quicklink();
      });</script></body></html>